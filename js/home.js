STK.register("historyM",function(a){if(typeof $CONFIG!="undefined"&&$CONFIG.bigpipe=="true"){var b=a.core.util.browser,c=a.core.util.hideContainer,d=[],e,f=!0,g=!!history.pushState,h="onhashchange"in window&&(typeof document.documentMode=="undefined"||document.documentMode==8),i,j,k;if(!h&&(b.IE6||b.IE7)){(i=a.C("iframe")).style.display="none";c.appendChild(i);i=i.contentWindow;j=function(a){a=encodeURIComponent(a);i.document.open("text/html");i.document.write("<html><head></head><body onload=\"parent.STK&&parent.STK.historyM&&parent.STK.historyM.hashFrameChangeHash&&parent.STK.historyM.hashFrameChangeHash('"+a+"');\"></body></html>");i.document.close()};k=function(a){a=decodeURIComponent(a);if(!k.first)k.first=1;else{window.location.hash=a;a!="#!"+e&&l(e=a.substr(2),!0)}}}var l=function(b,c){j&&!c&&j("#!"+b);if(f)for(var e=0;e<d.length;e++)try{d[e](b)}catch(g){a.log(g)}f=!0},m=function(b){var c=a.parseURL(b||window.location);return{host:c.host,path:"/"+c.path,query:c.query&&"?"+c.query,hash:c.hash&&"#"+c.hash}},n=function(){var b=a.parseURL(window.location);return/^!/.test(b.hash)?a.parseURL("http://"+b.host+b.hash.substr(1)):b},o=function(b,c){if(!/^\//.test(b))a.log("地址:("+b+") 不为正确的路径,请使用绝对路径; 例：/directory/page.php?params#hash");else{c=a.parseParam({callChange:!0,callChangeOnSame:!0},c);f=c.callChange;if(g){b=b.replace(/#.*$/,"");if(e==b){if(!c.callChangeOnSame)return}else history.pushState(null,null,e=b);l(b);return}var d="#!"+b;b=b.replace(/#.*$/,"");e==b?c.callChangeOnSame&&l(b):window.location.hash=d}},p=function(b,c){if(!!b){c=c||!1;var d=n(),e=a.queryToJson(d.query);for(var f in b)b[f]===null?delete e[f]:e[f]=b[f];d.query=a.jsonToQuery(e);result=["/",d.path,d.query==""?"":"?",d.query,d.hash==""?"":"#",d.hash].join("");o(result,{callChange:c})}},q=function(b,c){if(typeof b=="string"&&!/^!/.test(b)){var d=a.parseURL(window.location).hash,e,f=window.location.toString().replace(/#.*$/,"");if(/^!/.test(d)){d=d.replace(/#.*$/,"");e="#"+d+"#"+b}else e="#"+b;c?window.location.hash=e:window.location.replace(f+e)}return t},r=function(a){a&&d.push(a);return t};e=window.location.toString().replace(/^http:\/\/.*?\//,"/").replace(/#.*$/,"");if(g)a.addEvent(window,"popstate",function(){setTimeout(function(){var a=m(),b=a.path+a.query;e!=b&&l(e=b)})});else{var s=function(){var a,b=m();/^#!/.test(b.hash)?a=b.hash.substr(2).replace(/#.*$/,""):a=b.path+b.query;e!=a&&l(e=a)};h?a.addEvent(window,"hashchange",function(){s()}):setInterval(function(){s()},200)}j&&j("#!"+e);var t={parseURL:n,getURL:m,pushState:o,setQuery:p,setPlainHash:q,onpopstate:r,hashFrameChangeHash:k};return t}});
;
STK.register("kit.extra.language",function(a){window.$LANG||(window.$LANG={});return function(b,c){var d=a.core.util.language(b,$LANG);d=d.replace(/\\}/ig,"}");c&&(d=a.templet(d,c));return d}});
STK.register("kit.extra.merge",function(a){return function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}});
STK.register("kit.io.ajax",function(a){var b=function(b,c,d){c=c|0||1;d=d||"fail";var e=b.args;e.__rnd&&delete e.__rnd;(new Image).src="http://weibolog.sinaapp.com/?t="+c+"&u="+encodeURIComponent(b.url)+"&p="+encodeURIComponent(a.core.json.jsonToQuery(e))+"&m="+d};return function(c){var d,e,f,g,h,i,j;i=function(a){h=!1;typeof a=="string"?j(a):c.onComplete(a,d.args);setTimeout(k,0)};j=function(a){h=!1;typeof c.onFail=="function"&&c.onFail(a,d.args);setTimeout(k,0);try{b(d)}catch(e){}};f=[];g=null;h=!1;d=a.parseParam({url:"",method:"get",responseType:"json",timeout:3e4,onTraning:a.funcEmpty,isEncode:!0},c);d.onComplete=i;d.onFail=j;d.onTimeout=function(){try{b(d)}catch(a){}};var k=function(){if(!!f.length){if(h===!0)return;h=!0;d.args=f.shift();if(d.method.toLowerCase()=="post"){var b=a.core.util.URL(d.url);b.setParam("__rnd",(new Date).valueOf());d.url=b.toString()}g=a.ajax(d)}},l=function(a){while(f.length)f.shift();h=!1;if(g)try{g.abort()}catch(b){}g=null};e={};e.request=function(a){a||(a={});c.noQueue&&l();if(!c.uniqueRequest||!g){f.push(a);a._t=0;k()}};e.abort=l;return e}});
STK.register("kit.io.jsonp",function(a){return function(b){var c,d,e,f,g;c=a.parseParam({url:"",method:"get",responseType:"json",varkey:"_v",timeout:3e4,onComplete:a.funcEmpty,onTraning:a.funcEmpty,onFail:a.funcEmpty,isEncode:!0},b);e=[];f={};g=!1;var h=function(){if(!!e.length){if(g===!0)return;g=!0;f.args=e.shift();f.onComplete=function(a){g=!1;c.onComplete(a,f.args);setTimeout(h,0)};f.onFail=function(a){g=!1;c.onFail(a);setTimeout(h,0)};a.jsonp(a.kit.extra.merge(c,{args:f.args,onComplete:function(a){f.onComplete(a)},onFail:function(a){try{f.onFail(a)}catch(b){}}}))}};d={};d.request=function(a){a||(a={});e.push(a);a._t=1;h()};d.abort=function(a){while(e.length)e.shift();g=!1;f=null};return d}});
STK.register("kit.io.inter",function(a){return function(){var b,c,d;b={};c={};d={};b.register=function(a,b){if(c[a]!==undefined)throw a+" interface has been registered";c[a]=b;d[a]={}};b.hookComplete=function(b,c){var e=a.core.util.getUniqueKey();d[b][e]=c;return e};b.removeHook=function(a,b){d[a]&&d[a][b]&&delete d[a][b]};b.getTrans=function(b,e){var f=a.kit.extra.merge(c[b],e);f.onComplete=function(a,c){try{e.onComplete(a,c)}catch(f){}if(a.code==="100000")try{e.onSuccess(a,c)}catch(f){}else try{e.onError(a,c)}catch(f){}for(var g in d[b])try{d[b][g](a,c)}catch(f){}};return c[b].requestMode==="jsonp"?a.kit.io.jsonp(f):c[b].requestMode==="ijax"?a.kit.io.ijax(f):a.kit.io.ajax(f)};b.request=function(b,e,f){var g=a.core.json.merge(c[b],e);g.onComplete=function(a,c){try{e.onComplete(a,c)}catch(f){}if(a.code==="100000")try{e.onSuccess(a,c)}catch(f){}else try{e.onError(a,c)}catch(f){}for(var g in d[b])try{d[b][g](a,c)}catch(f){}};g=a.core.obj.cut(g,["noqueue"]);g.args=f;return c[b].requestMode==="jsonp"?a.jsonp(g):c[b].requestMode==="ijax"?a.ijax(g):a.ajax(g)};return b}});
STK.register("common.trans.subject",function(a){var b=a.kit.io.inter(),c=b.register;c("layer_close",{url:"/aj_oneop/close",method:"post"});c("repost",{url:"/aj_mblog/repost",method:"post"});c("guideShare",{url:"/aj_mblog/guideshare",method:"post"});c("sum2013xiaohuoban",{url:"/aj_my2013/sharepic",method:"get"});c("sum2013publish",{url:"/aj_my2013/share",method:"post"});return b});
STK.register("kit.dom.cssText",function(a){var b=function(a,b){var c=(a+";"+b).replace(/(\s*(;)\s*)|(\s*(:)\s*)/g,"$2$4"),d;while(c&&(d=c.match(/(^|;)([\w\-]+:)([^;]*);(.*;)?\2/i)))c=c.replace(d[1]+d[2]+d[3],"");return c};return function(a){a=a||"";var c=[],d={push:function(a,b){c.push(a+":"+b);return d},remove:function(a){for(var b=0;b<c.length;b++)c[b].indexOf(a+":")==0&&c.splice(b,1);return d},getStyleList:function(){return c.slice()},getCss:function(){return b(a,c.join(";"))}};return d}});
STK.register("kit.dom.fix",function(a){function f(c,e,f){if(!!d(c)){var g="fixed",h,i,j,k,l=c.offsetWidth,m=c.offsetHeight,n=a.core.util.winSize(),o=0,p=0,q=a.kit.dom.cssText(c.style.cssText);if(!b){g="absolute";var r=a.core.util.scrollPos();o=h=r.top;p=i=r.left;switch(e){case"lt":h+=f[1];i+=f[0];break;case"lb":h+=n.height-m-f[1];i+=f[0];break;case"rt":h+=f[1];i+=n.width-l-f[0];break;case"rb":h+=n.height-m-f[1];i+=n.width-l-f[0];break;case"c":default:h+=(n.height-m)/2+f[1];i+=(n.width-l)/2+f[0]}j=k=""}else{h=k=f[1];i=j=f[0];switch(e){case"lt":k=j="";break;case"lb":h=j="";break;case"rt":i=k="";break;case"rb":h=i="";break;case"c":default:h=(n.height-m)/2+f[1];i=(n.width-l)/2+f[0];k=j=""}}if(e=="c"){h<o&&(h=o);i<p&&(i=p)}q.push("position",g).push("top",h+"px").push("left",i+"px").push("right",j+"px").push("bottom",k+"px");c.style.cssText=q.getCss()}}function e(b){b=a.core.arr.isArray(b)?b:[0,0];for(var c=0;c<2;c++)typeof b[c]!="number"&&(b[c]=0);return b}function d(b){return a.core.dom.getStyle(b,"display")!="none"}var b=!(a.core.util.browser.IE6||document.compatMode!=="CSS1Compat"&&STK.IE),c=/^(c)|(lt)|(lb)|(rt)|(rb)$/;return function(d,g,h){var i,j,k=!0,l;if(a.core.dom.isNode(d)&&c.test(g)){var m={getNode:function(){return d},isFixed:function(){return k},setFixed:function(a){(k=!!a)&&f(d,i,j);return this},setAlign:function(a,b){if(c.test(a)){i=a;j=e(b);k&&f(d,i,j)}return this},destroy:function(){b||b&&a.core.evt.removeEvent(window,"scroll",n);a.core.evt.removeEvent(window,"resize",n);a.core.evt.custEvent.undefine(l)}};l=a.core.evt.custEvent.define(m,"beforeFix");m.setAlign(g,h);function n(c){c=c||window.event;a.core.evt.custEvent.fire(l,"beforeFix",c.type);k&&(!b||i=="c")&&f(d,i,j)}b||a.core.evt.addEvent(window,"scroll",n);a.core.evt.addEvent(window,"resize",n);return m}}});
STK.register("module.mask",function(a){function k(b){var c;(c=b.getAttribute(f))||b.setAttribute(f,c=a.getUniqueKey());return">"+b.tagName.toLowerCase()+"["+f+'="'+c+'"]'}function j(){b=a.C("div");var c='<div node-type="outer">';a.core.util.browser.IE6&&(c+='<div style="position:absolute;width:100%;height:100%;"></div>');c+="</div>";b=a.builder(c).list.outer[0];document.body.appendChild(b);e=!0;d=a.kit.dom.fix(b,"lt");var f=function(){var c=a.core.util.winSize();b.style.cssText=a.kit.dom.cssText(b.style.cssText).push("width",c.width+"px").push("height",c.height+"px").getCss()};i.add(d,"beforeFix",f);f()}var b,c=[],d,e=!1,f="STK-Mask-Key",g=a.core.dom.setStyle,h=a.core.dom.getStyle,i=a.core.evt.custEvent,l={getNode:function(){return b},show:function(c,f){if(e){c=a.core.obj.parseParam({opacity:.3,background:"#000000"},c);b.style.background=c.background;g(b,"opacity",c.opacity);b.style.display="";d.setAlign("lt");f&&f()}else{j();l.show(c,f)}return l},hide:function(){b.style.display="none";nowIndex=undefined;c=[];return l},showUnderNode:function(d,e){a.isNode(d)&&l.show(e,function(){g(b,"zIndex",h(d,"zIndex"));var e=k(d),f=a.core.arr.indexOf(c,e);f!=-1&&c.splice(f,1);c.push(e);a.core.dom.insertElement(d,b,"beforebegin")});return l},back:function(){if(c.length<1)return l;var d,e;c.pop();if(c.length<1)l.hide();else if((e=c[c.length-1])&&(d=a.sizzle(e,document.body)[0])){g(b,"zIndex",h(d,"zIndex"));a.core.dom.insertElement(d,b,"beforebegin")}else l.back();return l},destroy:function(){i.remove(d);b.style.display="none";lastNode=undefined;_cache={}}};return l});
STK.register("kit.extra.reuse",function(a){return function(b,c){var d,e,f;d=a.parseParam({},c);f=[];var g=function(){var a=b();f.push({store:a,used:!0});return a},h=function(b){a.foreach(f,function(a,c){if(b===a.store){a.used=!0;return!1}})},i=function(b){a.foreach(f,function(a,c){if(b===a.store){a.used=!1;return!1}})},j=function(){for(var a=0,b=f.length;a<b;a+=1)if(f[a].used===!1){f[a].used=!0;return f[a].store}return g()};e={};e.setUsed=h;e.setUnused=i;e.getOne=j;e.getLength=function(){return f.length};return e}});
STK.register("module.layer",function(a){var b=function(a){var b={};if(a.style.display=="none"){a.style.visibility="hidden";a.style.display="";b.w=a.offsetWidth;b.h=a.offsetHeight;a.style.display="none";a.style.visibility="visible"}else{b.w=a.offsetWidth;b.h=a.offsetHeight}return b},c=function(c,d){d=d||"topleft";var e=null;if(c.style.display=="none"){c.style.visibility="hidden";c.style.display="";e=a.core.dom.position(c);c.style.display="none";c.style.visibility="visible"}else e=a.core.dom.position(c);if(d!=="topleft"){var f=b(c);if(d==="topright")e.l=e.l+f.w;else if(d==="bottomleft")e.t=e.t+f.h;else if(d==="bottomright"){e.l=e.l+f.w;e.t=e.t+f.h}}return e};return function(d){var e=a.core.dom.builder(d),f=e.list.outer[0],g=e.list.inner[0],h=a.core.dom.uniqueID(f),i={},j=a.core.evt.custEvent.define(i,"show");a.core.evt.custEvent.define(j,"hide");var k=null;i.show=function(){f.style.display="";a.core.evt.custEvent.fire(j,"show");return i};i.hide=function(){try{a.core.evt.stopEvent()}catch(b){}f.style.display="none";a.custEvent.fire(j,"hide");return i};i.getPosition=function(a){return c(f,a)};i.getSize=function(a){if(a||!k)k=b.apply(i,[f]);return k};i.html=function(a){a!==undefined&&(g.innerHTML=a);return g.innerHTML};i.text=function(b){text!==undefined&&(g.innerHTML=a.core.str.encodeHTML(b));return a.core.str.decodeHTML(g.innerHTML)};i.appendChild=function(a){g.appendChild(a);return i};i.getUniqueID=function(){return h};i.getOuter=function(){return f};i.getInner=function(){return g};i.getParentNode=function(){return f.parentNode};i.getDomList=function(){return e.list};i.getDomListByKey=function(a){return e.list[a]};i.getDom=function(a,b){return e.list[a]?e.list[a][b||0]:!1};i.getCascadeDom=function(b,c){return e.list[b]?a.core.dom.cascadeNode(e.list[b][c||0]):!1};return i}});
STK.register("module.dialog",function(a){return function(b,c){if(!b)throw"module.dialog need template as first parameter";var d,e,f,g,h,i,j,k,l,m,n,o;l=!0;var p=function(){l!==!1&&e.hide()},q=function(){d=a.parseParam({t:null,l:null,width:null,height:null},c);e=a.module.layer(b,d);g=e.getOuter();h=e.getDom("title");k=e.getDom("title_content");i=e.getDom("inner");j=e.getDom("close");a.addEvent(j,"click",function(b){a.preventDefault(b);n();return!1});a.custEvent.add(e,"show",function(){a.hotKey.add(document.documentElement,["esc"],p,{type:"keyup",disableInInput:!0})});a.custEvent.add(e,"hide",function(){a.hotKey.remove(document.documentElement,["esc"],p,{type:"keyup"});l=!0})};q();o=a.objSup(e,["show","hide"]);n=function(b){if(typeof m=="function"&&!b&&m()===!1)return!1;o.hide();try{a.contains(document.body,e.getOuter())&&document.body.removeChild(e.getOuter())}catch(c){}return f};f=e;f.show=function(){a.contains(document.body,e.getOuter())||document.body.appendChild(e.getOuter());o.show();return f};f.hide=n;f.setPosition=function(a){g.style.top=a.t+"px";g.style.left=a.l+"px";return f};f.setMiddle=function(){if($CONFIG.in_frame){var b=function(a,b){var c=0,d=0;b=b||window;while(a!=null&&a!=b.document.body){c+=a.offsetLeft;d+=a.offsetTop;a=a.offsetParent}return{l:c,t:d}},c=a.core.util.winSize(window.parent),d=e.getSize(!0),h=window.parent.document.getElementById("topic_frame");if(h==null)return;var i=window.parent.document.documentElement,j=window.parent.document.body,k=Math.max(window.parent.pageYOffset||0,i.scrollTop,j.scrollTop),l=b(h,window.parent),m={t:k+(c.height-d.h)/2-l.t,l:(c.width-d.w)/2-l.l};e.setPosition(m)}else{var c=a.core.util.winSize(),d=e.getSize(!0);g.style.top=a.core.util.scrollPos().top+(c.height-d.h)/2+"px";g.style.left=(c.width-d.w)/2+"px"}return f};f.setTitle=function(a){k.innerHTML=a;return f};f.setContent=function(a){typeof a=="string"?i.innerHTML=a:i.appendChild(a);return f};f.clearContent=function(){while(i.children.length)a.removeNode(i.children[0]);return f};f.setAlign=function(){};f.setBeforeHideFn=function(a){m=a};f.clearBeforeHideFn=function(){m=null};f.unsupportEsc=function(){l=!1};f.supportEsc=function(){l=!0};return f}});
STK.register("kit.dom.drag",function(a){return function(b,c){var d,e,f,g,h,i,j,k,l=function(){m();n()},m=function(){d=a.parseParam({moveDom:b,perchStyle:"border:solid #999999 2px;",dragtype:"perch",actObj:{},pagePadding:5},c);f=d.moveDom;e={};g={};h=a.drag(b,{actObj:d.actObj});if(d.dragtype==="perch"){i=a.C("div");j=!1;k=!1;f=i}b.style.cursor="move"},n=function(){a.custEvent.add(d.actObj,"dragStart",o);a.custEvent.add(d.actObj,"dragEnd",p);a.custEvent.add(d.actObj,"draging",q)},o=function(c,e){document.body.style.cursor="move";var f=a.core.util.pageSize().page;g=a.core.dom.position(d.moveDom);g.pageX=e.pageX;g.pageY=e.pageY;g.height=d.moveDom.offsetHeight;g.width=d.moveDom.offsetWidth;g.pageHeight=f.height;g.pageWidth=f.width;if(d.dragtype==="perch"){var h=[];h.push(d.perchStyle);h.push("position:absolute");h.push("z-index:"+(d.moveDom.style.zIndex+10));h.push("width:"+d.moveDom.offsetWidth+"px");h.push("height:"+d.moveDom.offsetHeight+"px");h.push("left:"+g.l+"px");h.push("top:"+g.t+"px");i.style.cssText=h.join(";");k=!0;setTimeout(function(){if(k){document.body.appendChild(i);j=!0}},100)}b.setCapture!==undefined&&b.setCapture()},p=function(a,c){document.body.style.cursor="auto";b.setCapture!==undefined&&b.releaseCapture();if(d.dragtype==="perch"){k=!1;d.moveDom.style.top=i.style.top;d.moveDom.style.left=i.style.left;if(j){document.body.removeChild(i);j=!1}}},q=function(a,b){var c=g.t+(b.pageY-g.pageY),e=g.l+(b.pageX-g.pageX),h=c+g.height,i=e+g.width,j=g.pageHeight-d.pagePadding,k=g.pageWidth-d.pagePadding;if(h<j&&c>0)f.style.top=c+"px";else{c<0&&(f.style.top="0px");h>=j&&(f.style.top=j-g.height+"px")}if(i<k&&e>0)f.style.left=e+"px";else{e<0&&(f.style.left="0px");i>=k&&(f.style.left=k-g.width+"px")}};l();e.destroy=function(){document.body.style.cursor="auto";typeof f.setCapture=="function"&&f.releaseCapture();if(d.dragtype==="perch"){k=!1;if(j){document.body.removeChild(i);j=!1}}a.custEvent.remove(d.actObj,"dragStart",o);a.custEvent.remove(d.actObj,"dragEnd",p);a.custEvent.remove(d.actObj,"draging",q);h.destroy&&h.destroy();d=null;f=null;g=null;h=null;i=null;j=null;k=null};e.getActObj=function(){return d.actObj};return e}});
STK.register("ui.dialog",function(a){var b='<div class="W8_layer" node-type="outer" style="display:none;position:absolute;z-index:10001"><div class="bg"><table border="0" cellspacing="0" cellpadding="0"><tr><td><div class="content" node-type="layoutContent"><div class="title" node-type="title"><span node-type="title_content"></span></div><a href="javascript:void(0);" class="W8_imgicons W_close" title="#L{关闭}" onclick="return false;" node-type="close"></a><div node-type="inner"></div></div></td></tr></table></div></div>',c=a.kit.extra.language,d=null,e,f=function(){var b=a.module.dialog(c(e.template));a.custEvent.add(b,"show",function(){a.module.mask.showUnderNode(b.getOuter())});a.custEvent.add(b,"hide",function(){a.module.mask.back();b.setMiddle()});a.kit.dom.drag(b.getDom("title"),{actObj:b,moveDom:b.getOuter()});b.destroy=function(){g(b);try{b.hide(!0)}catch(a){}};return b},g=function(a){a.setTitle("").clearContent();d.setUnused(a)};return function(c){e=a.parseParam({template:b,isHold:!1},c);var h=e.isHold;e=a.core.obj.cut(e,["isHold"]);d||(d=a.kit.extra.reuse(f));var i=d.getOne();h||a.custEvent.add(i,"hide",function(){a.custEvent.remove(i,"hide",arguments.callee);g(i)});return i}});
STK.register("common.dialog.quickLogin",function(a){var b=a.kit.extra.language,c={},d="weibo.com",e,f=window.$CONFIG&&window.$CONFIG.lang||"zh-cn",g=a.core.util.browser,h={src:"http://weibo.com/signup/full_info.php?lang=zh-cn&entry=quick&hook=App.hook&_v="+a.core.util.getUniqueKey(),width:"455px",height:"180px",isHold:!0};d==null||g.IE6||g.IE7?h.src+="&href="+encodeURIComponent(window.location.href):h.src+="&domain="+encodeURIComponent(d);window.App||(window.App={});window.App=window.App?window.App:{};window.App.hook=window.App.hook?window.App.hook:function(a,b){switch(a){case"btn_quick_opening":window.location.reload(!0);break;case"link_change_account":e.hide();if($CONFIG.in_frame){window.parent.WBtopPublic.showLoginLayer({lang:"zh-cn",loginSuccessUrl:url});return}WBtopPublic&&WBtopPublic.showLoginLayer&&WBtopPublic.showLoginLayer()}return!1};var i=function(){var b=['<iframe node-type="frame" width="'+h.width+'" height="'+h.height+'" allowtransparency="true" scrolling="no" frameborder="0" src=""></iframe>'],c=a.builder(b.join("")),d;if(!e){e=a.ui.dialog(h);e.setTitle("快速开通微博")}else e.clearContent();e.setContent(c.box);e.show().setMiddle();d=c.list.frame[0];a.addEvent(d,"load",function(){d.height=h.height;e.setMiddle()});d.src=h.src};c.show=function(){if($CONFIG.quick_reg==1){document.domain="weibo.com";i()}else{var b=a.core.util.browser.IE6?encodeURI(location.href):location.href;if($CONFIG.in_frame){window.parent.WBtopPublic.showLoginLayer({lang:"zh-cn",loginSuccessUrl:b});return}WBtopPublic&&WBtopPublic.showLoginLayer&&WBtopPublic.showLoginLayer({lang:"zh-cn",loginSuccessUrl:b})}};c.isNoLogin=function(){return $CONFIG.uid==null||$CONFIG.uid.length==0||$CONFIG.uid=="2"};return c});
STK.register("ui.simpleAlert",function(a){var b='<div node-type="outer" class="layer_point"><dl class="point clearfix"><dt><span class="" node-type="icon"></span></dt><dd node-type="inner"><p class="W_texta" node-type="textLarge"></p><p class="W_textb" node-type="textSmall"></p></dd></dl></div>',c={success:"W8_imgicons icon_succM",error:"W8_imgicons icon_errorM",warn:"W8_imgicons icon_warnM","delete":"W8_imgicons icon_delM",question:"W8_imgicons icon_questionM"},d=a.kit.extra.language,e=null,f=function(a,b){a.getDom("icon").className=b.icon;a.getDom("textLarge").innerHTML=b.textLarge;a.getDom("textSmall").innerHTML=b.textSmall};return function(g,h){var i,j,k,l,m;i=a.parseParam({title:d("#L{提示}"),icon:"success",textLarge:g,textSmall:"",timeout:1e3,OK:function(){}},h);i.icon=c[i.icon];j={};e||(e=a.kit.extra.reuse(function(){var c=a.module.layer(d(b));return c}));k=e.getOne();l=a.ui.dialog();l.setContent(k.getOuter());l.setTitle(i.title);f(k,i);var n=function(b){a.preventDefault(b);l.hide()};a.custEvent.add(l,"hide",function(){a.custEvent.remove(l,"hide",arguments.callee);e.setUnused(k);clearTimeout(m);i.OK&&i.OK()});i.timeout&&(m=setTimeout(l.hide,i.timeout));l.show().setMiddle();j.alt=k;j.dia=l;return j}});
STK.register("comp.part.original",function(a){var b=a.kit.extra.language;return function(b,c){var d={},e=$CONFIG.bigpipe=="true",f,g={close:function(b){var c=a.common.trans.subject.getTrans("layer_close",{onSuccess:function(a){},onError:function(a){},onFail:function(){}});c.request({guide:"pop_index"});b!==!0&&h.mvButton()},send:function(){if(a.common.dialog.quickLogin.isNoLogin())a.common.dialog.quickLogin.show();else{h.mvButton();var b={guide:"pop_index",follow:f.follow.checked?1:0,mid:"3526827307544333"},c=a.common.trans.subject.getTrans("repost",{onSuccess:function(b){a.ui.simpleAlert("参与成功");g.close(!0)},onError:function(b){a.common.dialog.quickLogin.show()},onFail:function(){}});c.request(b)}}},h={showLayer:function(){a.removeNode(f.layer);document.body.appendChild(f.layer);var c=a.position(b);f.layer.style.top=c.t-61+"px";f.layer.style.left=c.l-160+"px";f.layer.style.display="block";f.layer.style.zIndex=100;f.lButton.id="set-normaluse-button";showAppBookmarkButton("set-normaluse-button");a.addEvent(f.close,"click",g.close);a.addEvent(f.send,"click",g.send);a.module.mask.showUnderNode(f.layer)},mvButton:function(){a.module.mask.back();a.removeNode(f.layer);a.removeNode(f.lButton);b.appendChild(f.lButton)}},i={},j={},k=function(){l();m();n();o();p();q();r()},l=function(){if(b==null)throw"[comp.part.original]:argsCheck()-You should provide the node."},m=function(){f={layer:a.sizzle("div[node-type=original-layer]",b)[0],lButton:a.sizzle("div[node-type=set-normaluse]",b)[0],close:a.sizzle("[node-type=close]",b)[0],send:a.sizzle("[node-type=send]",b)[0],follow:a.sizzle("[node-type=follow]",b)[0]}},n=function(){},o=function(){},p=function(){},q=function(){},r=function(){},s=function(){};d.destroy=s;k();$CONFIG.pop_index!=null&&$CONFIG.pop_index=="pop_index"?$CONFIG.in_frame||setTimeout(h.showLayer,500):showAppBookmarkButton(b.id);return d}});
STK.pageletM.register("pl.part.original",function(a){var b=a.E("pl_part_original"),c={};if(!b){a.log("[pl.part.original] You should provide the node");return c}c=a.comp.part.original(b);return c});
STK.register("comp.part.goTop",function(a){return function(b){if(!!b){var c=null;setInterval(function(){var d=a.core.util.scrollPos(),e=d.top>300?"":"none";e!=b.style.display&&(b.style.display=e);if(a.core.util.browser.IE6&&b.style.display!="none"){b.style.position!="absolute"&&(b.style.position="absolute");var f=a.core.util.scrollPos(),g=a.core.util.winSize(),h=f.top+g.height-100-b.offsetHeight;h!=c&&(b.style.top=h+"px");c=h}},50);a.core.evt.addEvent(b,"click",function(){window.scrollTo(0,0)})}}});
STK.pageletM.register("pl.part.goTop",function(a){var b=a.E("pl_part_goTop"),c={};if(!b){a.log("[pl.part.goTop] You should provide the node");return c}c=a.comp.part.goTop(b);return c});
STK.register("ui.alert",function(a){var b='<div node-type="outer" class="layer_point"><dl class="point clearfix"><dt><span class="" node-type="icon"></span></dt><dd node-type="inner"><p class="W_texta" node-type="textLarge"></p><p class="W_textb" node-type="textSmall"></p></dd></dl><div class="btn"><a href="javascript:void(0)" class="W_btn_b" node-type="OK"></a></div></div>',c={success:"W8_imgicons icon_succM",error:"W8_imgicons icon_errorM",warn:"W8_imgicons icon_warnM","delete":"W8_imgicons icon_delM",question:"W8_imgicons icon_questionM"},d=a.kit.extra.language,e=null,f=function(a,b){a.getDom("icon").className=b.icon;a.getDom("textLarge").innerHTML=b.textLarge;a.getDom("textSmall").innerHTML=b.textSmall;a.getDom("OK").innerHTML="<span>"+b.OKText+"</span>"};return function(g,h){var i,j,k,l,m;i=a.parseParam({title:d("#L{提示}"),icon:"warn",textLarge:g,textSmall:"",OK:a.funcEmpty,OKText:d("#L{确定}"),timeout:0},h);i.icon=c[i.icon];j={};e||(e=a.kit.extra.reuse(function(){var c=a.module.layer(d(b));return c}));k=e.getOne();l=a.ui.dialog();l.setContent(k.getOuter());l.setTitle(i.title);f(k,i);var n=function(b){a.preventDefault(b);l.hide()};a.addEvent(k.getDom("OK"),"click",n);a.custEvent.add(l,"hide",function(){a.custEvent.remove(l,"hide",arguments.callee);a.removeEvent(k.getDom("OK"),"click",n);e.setUnused(k);clearTimeout(m);i.OK()});i.timeout&&(m=setTimeout(l.hide,i.timeout));l.show().setMiddle();j.alt=k;j.dia=l;return j}});
STK.register("common.trans.publish",function(a){var b=a.kit.io.inter(),c=b.register;c("themeComment",{url:"/t4/weiba/_html/inter/themeComment.php",method:"post"});c("topic_add",{url:"/aj_re/topicadd",method:"post"});c("join_point",{url:"/aj_thread/joinViewpoint",method:"post"});c("topicForward",{url:"/t4/weiba/_html/inter/topicForward.php",method:"post"});c("forward",{url:"/aj_mblog/repost",method:"post"});c("share",{url:"/aj_re/share",method:"post"});c("pkComment",{url:"/aj_pk/create_reply",method:"post"});c("addTopic",{url:"/aj_topic/add",method:"post"});c("articleForward",{url:"/aj_mblog/add",method:"post"});c("send",{url:"/aj_mblog/add",method:"post"});c("home_send",{url:"/aj_mblog/send",method:"post"});c("topic_share",{url:"/aj_thread/addThread",method:"post"});return b});
STK.register("common.dialog.certification",function(a){var b=a.kit.extra.language,c={},d="weibo.com",e,f=window.$CONFIG&&window.$CONFIG.lang||"zh-cn",g=a.core.util.browser,h={src:"http://weibo.com/a/verify/email?stage=home_verification&from=topic",width:"380px",height:"230px",isHold:!0};window.App||(window.App={});window.App=window.App?window.App:{};window.App.hook=window.App.hook?window.App.hook:function(a,b){switch(a){case"btn_quick_opening":window.location.reload(!0);break;case"link_change_account":e.hide();if($CONFIG.in_frame){window.parent.WBtopPublic.showLoginLayer({lang:"zh-cn",loginSuccessUrl:url});return}WBtopPublic&&WBtopPublic.showLoginLayer&&WBtopPublic.showLoginLayer()}return!1};var i=function(){var b=['<iframe node-type="frame" width="'+h.width+'" height="'+h.height+'" allowtransparency="true" scrolling="no" frameborder="0" src=""></iframe>'],c=a.builder(b.join("")),d;if(!e){e=a.ui.dialog(h);e.setTitle("账号激活")}else e.clearContent();e.setContent(c.box);e.getOuter().style.zIndex="10003";e.show().setMiddle();d=c.list.frame[0];a.addEvent(d,"load",function(){d.height=h.height;e.setMiddle()});d.src=h.src};c.show=function(){document.domain="weibo.com";i()};c.isNoLogin=function(){return $CONFIG.uid==null||$CONFIG.uid.length==0||$CONFIG.uid=="2"};return c});
STK.register("kit.extra.count",function(a){function b(b){var c=41,d=140,e=20,f=b,g=b.match(/http:\/\/[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z_\$\.\+\!\*\(\)\/,:;@&=\?\~\#\%]*)*/gi)||[],h=0;for(var i=0,j=g.length;i<j;i++){var k=a.core.str.bLength(g[i]);if(/^(http:\/\/t.cn)/.test(g[i]))continue;/^(http:\/\/)+(t.sina.com.cn|t.sina.cn)/.test(g[i])||/^(http:\/\/)+(weibo.com|weibo.cn)/.test(g[i])?h+=k<=c?k:k<=d?e:k-d+e:h+=k<=d?e:k-d+e;f=f.replace(g[i],"")}var l=Math.ceil((h+a.core.str.bLength(f))/2);return l}return function(a){a=a.replace(/\r\n/g,"\n");return num=b(a)}});
STK.register("comp.part.picShow",function(a){var b=a.kit.extra.language;return function(b,c){var d={},e=$CONFIG.bigpipe=="true",f,g,h=0,i=0,j=!1,k={focus:function(){clearTimeout(i)},blur:function(){var b="#"+decodeURIComponent(a.core.json.queryToJson(f.shows[h].getAttribute("action-data")).topic)+"#",c=a.trim(f.textEl.value);if(c==b||c.length==0)i=setTimeout(function(){l.play()},3e3)},show:function(a){l.play(parseInt(a.data.idx,10))},send:function(b){if(j)return!1;var c=arguments.callee;if(i){clearTimeout(i);i=0}if(a.common.dialog.quickLogin.isNoLogin())a.common.dialog.quickLogin.show();else{var d=decodeURIComponent(a.core.json.queryToJson(f.shows[h].getAttribute("action-data")).topic),e="#"+d+"#",g=a.trim(f.textEl.value);if(g==e||g.length==0){a.ui.alert("请输入微博内容",{icon:"error"});return}if(a.kit.extra.count(g)>140){a.ui.alert("微博内容不得越过140个字",{icon:"error"});return}var k={text:g,keyword:d};j=!0;var m=a.common.trans.publish.getTrans("home_send",{onSuccess:function(b){j=!1;a.ui.simpleAlert("发布成功");f.textEl.value=e;setTimeout(function(){l.play()},5e3)},onError:function(b){j=!1;if(b.code=="100002")a.common.dialog.quickLogin.show();else{if(b.code=="20046"){a.common.dialog.certification.show();return}a.ui.alert(b.msg,{icon:"error"})}},onFail:function(){j=!1;a.ui.alert("网络连接失败，请稍候再试",{icon:"error"})}});m.request(k)}}},l={play:function(b){if(i){clearTimeout(i);i=0}f.pics[h].style.display="none";f.topicTitle[h].style.display="none";var c=a.sizzle("span",f.shows[h])[0];a.core.dom.removeClassName(c,"cur");h=b!=null?b:h+1;h=h>f.pics.length-1?0:h;f.pics[h].style.display="";f.topicTitle[h].style.display="";var c=a.sizzle("span",f.shows[h])[0];a.core.dom.addClassName(c,"cur");var d=a.core.json.queryToJson(f.shows[h].getAttribute("action-data"));f.textEl.value="#"+decodeURIComponent(d.topic)+"#";i=setTimeout(function(){l.play()},3e3)}},m={},n={},o=function(){p();q();r();s();t();u();v()},p=function(){b!=null},q=function(){f={pics:a.sizzle("a[node-type=pic]",b),shows:a.sizzle("a[action-type=show]",b),topicTitle:a.sizzle("a[node-type=topic-title]",b),send:a.sizzle("a[node-type=send]",b)[0],textEl:a.sizzle("input[node-type=textEl]",b)[0],showWrap:a.sizzle("[node-type=show-wrap]",b)[0]}},r=function(){},s=function(){a.addEvent(f.textEl,"focus",k.focus);a.addEvent(f.textEl,"blur",k.blur);a.addEvent(f.send,"click",k.send);g=a.core.evt.delegatedEvent(b);g.add("show","click",k.show)},t=function(){},u=function(){},v=function(){},w=function(){};d.destroy=w;o();i=setTimeout(function(){l.play()},3e3);return d}});
STK.pageletM.register("pl.part.picShow",function(a){var b=a.E("pl_part_picShow"),c={};if(!b){a.log("[pl.part.picShow] You should provide the node");return c}c=a.comp.part.picShow(b);return c});
STK.register("common.trans.partRefresh",function(a){var b=a.kit.io.inter(),c=b.register;c("trans1",{url:"/ajax/user/getcard",method:"get"});c("expertList",{url:"/aj_f/expertlisth",method:"get"});c("expertApply",{url:"/aj_f/expertapplylisth",method:"get"});c("manageRecord",{url:"/aj_f/loglist",method:"get"});c("memberList",{url:"/aj_member/mlist",method:"get"});c("mfollow",{url:"/aj_member/mfollow",method:"get"});c("adminList",{url:"/aj_f/CategoryAdminList",method:"get"});c("adminDetails",{url:"/aj_f/masterlistH",method:"get"});c("approveList",{url:"/aj_f/masterapplylisth",method:"get"});c("banned",{url:"/aj_f/bllist",method:"get"});c("hotTopic",{url:"/aj_block/trendshotsp",method:"get"});c("classList",{url:"/aj_f/CategoryList",method:"get"});c("profileBarList",{url:"/aj_profile/show",method:"get"});c("hot-list",{url:"/aj_block/hot",method:"get"});c("interest_listMain",{url:"/aj_topiclist/big",method:"get"});c("interest_classList",{url:"/aj_topiclist/small",method:"get"});c("interest_topicTemper",{url:"/aj_topiclist/hot",method:"get"});return b});
STK.register("common.ui.partRefresh",function(a){var b=a.kit.extra.language,c={loadType:1,loadHTML:b('<div part-refresh-loading="{n}" class="W8_loading_tips"><span>#L{正在加载，请稍候...}</span></div>'),retryHTML:b('<div part-refresh-retry="{n}"><span>#L{加载失败，}<a href="javascript:;" onclick="return false;" action-type="part-refresh" action-data="{p}">#L{请重试}</a></span></div>'),loadPos:"top",loadPosQuery:null,loadIcon:$CONFIG.cssPath+"/appstyle/public/images/common/loading.gif",retryIcon:$CONFIG.cssPath+"/appstyle/public/images/common/loading.gif",retryIconShowTime:1e3,loadFunc:function(){},retryFunc:function(){},jumpText:"跳页",nextText:"下一页",callback:function(){}};return function(b,d){var e={},f={},g={},h={},i={},j={refresh:function(c){var d=c.data,e=c.el;if(e.getAttribute("part-refresh-submit")&&e.getAttribute("part-refresh-submit").length>0){var f=a.core.dom.sizzle("[part-refresh-input="+e.getAttribute("part-refresh-submit")+"]",b)[0];if(f!=null&&a.trim(f.value).length>0){var g=a.core.json.queryToJson(f.getAttribute("action-data")).page;d[g]=a.trim(f.value)}}k.update(c.data);return!1},reload:function(a){var b=a.data["part-refresh"];k.reload(b)||k.update(a.data)},pageFocus:function(c){var d=c.srcElement||c.target;if(d.getAttribute("part-refresh-input")!=null&&d.getAttribute("part-refresh-input").length!=0){var e=a.core.json.queryToJson(d.getAttribute("action-data")),f=k.getConf(e.trans),g=a.core.dom.sizzle("[part-refresh-submit="+d.getAttribute("part-refresh-input")+"]",b)[0];if(g==null)return;g.tagName=="INPUT"?g.value=f.jumpText:g.innerHTML=f.jumpText}},pageBlur:function(c){var d=c.srcElement||c.target;if(d.getAttribute("part-refresh-input")!=null&&d.getAttribute("part-refresh-input").length!=0){var e=a.core.json.queryToJson(d.getAttribute("action-data")),f=k.getConf(e.trans),g=a.core.dom.sizzle("[part-refresh-submit="+d.getAttribute("part-refresh-input")+"]",b)[0];if(g==null)return;a.trim(d.value).length?g.tagName=="INPUT"?g.value=f.jumpText:g.innerHTML=f.jumpText:g.tagName=="INPUT"?g.value=f.nextText:g.innerHTML=f.nextText}}},k={getConf:function(e){if(f[e])return f[e];var g=null;d[e]==null?g=a.parseParam(c,{}):g=a.parseParam(c,d[e]);g.loadHTML=g.loadHTML.replace(/\{n\}/g,e);g.retryHTML=g.retryHTML.replace(/\{n\}/g,e);g.wrap=a.core.dom.sizzle("[part-refresh="+e+"]",b)[0];g.loadPosQuery&&(g.loadPosQuery=g.loadPosQuery.replace(/\{n\}/g,e));f[e]=g;return g},showRetry:function(a){var b=k.getConf(a.trans);switch(b.loadType){case 1:k.showRetryTip(a);break;case 2:k.showRetryIcon(a);break;case 3:k.showCustomRetry(a)}},hideRetry:function(a){var b=k.getConf(a.trans);switch(b.loadType){case 1:k.hideRetryTip(a);break;case 2:k.hideRetryIcon(a);break;case 3:k.hideCustomRetry(a)}},showLoading:function(a){k.hideMessage(a);var b=k.getConf(a.trans);switch(b.loadType){case 1:k.showWaitTip(a);break;case 2:k.showLoadIcon(a);break;case 3:k.showCustomLoading(a)}},hideLoading:function(a){var b=k.getConf(a.trans);switch(b.loadType){case 1:k.hideWaitTip(a);break;case 2:k.hideLoadIcon(a);break;case 3:k.hideCustomLoading(a)}},hideMessage:function(a){k.hideLoading(a);k.hideRetry(a)},showCustomLoading:function(b){var c=k.getConf(b.trans);try{c.loadFunc({query:a.parseParam(b,{}),type:"show"})}catch(d){}},hideCustomLoading:function(b){var c=k.getConf(b.trans);try{c.loadFunc({query:a.parseParam(b,{}),type:"hide"})}catch(d){}},showLoadIcon:function(b){var c=k.getConf(b.trans),d=h[b.trans];if(!d){d=a.C("IMG");d.src=c.loadIcon;d.style.display="none";d.style.position="absolute";i[b.trans]=d;document.body.appendChild(d)}d.style.display="";var e=a.position(c.wrap);d.style.left=e.l+(c.wrap.offsetWidth-d.offsetWidth)/2+"px";d.style.top=e.t+(c.wrap.offsetHeight-d.offsetHeight)/2+"px"},hideLoadIcon:function(a){var b=k.getConf(a.trans),c=h[a.trans];c&&(c.style.display="none")},showRetryTip:function(c){var d=k.getConf(c.trans);if(d.loadPosQuery){var e=a.core.dom.sizzle(d.loadPosQuery,b)[0];if(e==null)throw"[common.ui.partRefresh]:custFuns.showRetryTip()-You should provide the conf.loadPosQuery for "+d.trans+".";a.insertHTML(e,d.retryHTML.replace(/\{p\}/g,a.core.json.jsonToQuery(c)),d.loadPos=="top"?"beforebegin":"afterend")}else a.insertHTML(d.wrap,d.retryHTML.replace(/\{p\}/g,a.core.json.jsonToQuery(c)),d.loadPos=="top"?"afterbegin":"beforeend")},hideRetryTip:function(c){var d=a.core.dom.sizzle("[part-refresh-retry="+c.trans+"]",b)[0];d&&a.removeNode(d)},showRetryIcon:function(b){var c=k.getConf(b.trans),d=i[b.trans];if(!d){d=a.C("IMG");d.src=c.retryIcon;d.style.display="none";d.style.position="absolute";i[b.trans]=d;document.body.appendChild(d)}d.style.display="";var e=a.position(c.wrap);d.style.left=e.l+(c.wrap.offsetWidth-d.offsetWidth)/2+"px";d.style.top=e.t+(c.wrap.offsetHeight-d.offsetHeight)/2+"px";setTimeout(function(){k.hideRetryIcon(b)},c.retryIconShowTime)},hideRetryIcon:function(a){var b=k.getConf(a.trans),c=i[a.trans];c&&(c.style.display="none")},showCustomRetry:function(b){var c=k.getConf(b.trans);try{c.retryFunc({query:a.parseParam(b,{}),type:"show"})}catch(d){}},hideCustomRetry:function(b){var c=k.getConf(b.trans);try{c.retryFunc({query:a.parseParam(b,{}),type:"hide"})}catch(d){}},showWaitTip:function(c){var d=k.getConf(c.trans);if(d.loadPosQuery){var e=a.core.dom.sizzle(d.loadPosQuery,b)[0];if(e==null)throw"[common.ui.partRefresh]:custFuns.showWaitTip()-You should provide the conf.loadPosQuery for "+d.trans+".";a.insertHTML(e,d.loadHTML,d.loadPos=="top"?"beforebegin":"afterend")}else a.insertHTML(d.wrap,d.loadHTML,d.loadPos=="top"?"afterbegin":"beforeend")},hideWaitTip:function(c){var d=a.core.dom.sizzle("[part-refresh-loading="+c.trans+"]",b)[0];d&&a.removeNode(d)},reload:function(a){var b=g[a];if(b==null)return!1;k.update(b);return!0},update:function(b){var c=k.getConf(b.trans);if(c.wrap==null)throw"[common.ui.partRefresh]:custFuns.update()-You should provide the wrap.";k.showLoading(b);var d=a.common.trans.partRefresh.getTrans(b.trans,{onSuccess:function(d){k.hideMessage(b);g[b.trans]=b;c.wrap.innerHTML=d.data.html;a.custEvent.fire(e,"success",a.parseParam(b,{}));try{c.callback({type:"success",query:a.parseParam(b,{})})}catch(f){}},onError:function(d){k.hideMessage(b);k.showRetry(b);a.custEvent.fire(e,"error",a.parseParam(b,{}));try{c.callback({type:"error",query:a.parseParam(b,{})})}catch(f){}},onFail:function(){k.hideMessage(b);k.showRetry(b);a.custEvent.fire(e,"fail",a.parseParam(b,{}));try{c.callback({type:"fail",query:a.parseParam(b,{})})}catch(d){}}}),f=a.core.json.clone(b);delete f.trans;d.request(f)}},l={},m={},n=function(){o();q();p();r();s();t();u()},o=function(){if(b==null)throw"[common.ui.partRefresh]:argsCheck()-You should provide the node."},p=function(){},q=function(){},r=function(){var c=a.core.evt.delegatedEvent(b);c.add("part-refresh","click",j.refresh);c.add("part-refresh-reload","click",j.reload);if(b.addEventListener){b.addEventListener("focus",j.pageFocus,!0);b.addEventListener("blur",j.pageBlur,!0)}else{b.attachEvent("onfocusin",j.pageFocus);b.attachEvent("onfocusout",j.pageBlur)}},s=function(){a.custEvent.define(e,"success");a.custEvent.define(e,"error");a.custEvent.define(e,"fail")},t=function(){},u=function(){},v=function(){};e.destroy=v;e.update=k.update;e.reload=k.reload;n();return e}});
STK.register("comp.content.hotTopic",function(a){var b=a.kit.extra.language;return function(b,c){var d={},e=$CONFIG.bigpipe=="true",f={},g={},h={},i={},j=function(){k();l();m();n();o();p();q()},k=function(){if(b==null)throw"[comp.content.hotTopic]:argsCheck()-You should provide the node."},l=function(){},m=function(){a.common.ui.partRefresh(b,{hotTopic:{loadType:3,callback:function(a){}}})},n=function(){},o=function(){},p=function(){},q=function(){},r=function(){};d.destroy=r;j();return d}});
STK.pageletM.register("pl.content.hotTopic",function(a){var b=a.E("pl_content_hotTopic"),c={};if(!b)return c;c=a.comp.content.hotTopic(b);return c});
STK.register("comp.part.homeTopicList",function(a){var b=a.kit.extra.language;return function(b,c){var d={},e=$CONFIG.bigpipe=="true",f,g,h,i={refresh:function(b){var c=a.sizzle("a[action-type=disabled]",f.lstTab)[0];c.setAttribute("action-type","part-refresh");a.core.dom.removeClassName(c,"cur");b.el.setAttribute("action-type","disabled");a.core.dom.addClassName(b.el,"cur");h.update(b.data);return!1}},j={},k={},l={},m=function(){n();o();p();q();r();s();t()},n=function(){if(b==null)throw"[comp.part.homeTopicList]:argsCheck()-You should provide the node."},o=function(){f={lstTab:a.sizzle("[node-type=list-tab]",b)[0]}},p=function(){h=a.common.ui.partRefresh(b,{"country-list":{loadType:1}})},q=function(){g=a.core.evt.delegatedEvent(f.lstTab);g.add("part-refresh","click",i.refresh)},r=function(){},s=function(){},t=function(){},u=function(){};d.destroy=u;m();return d}});
STK.pageletM.register("pl.part.countryList",function(a){var b=a.E("pl_part_countryList"),c={};if(!b){a.log("[pl.part.countryList] You should provide the node");return c}c=a.comp.part.homeTopicList(b);return c});
STK.pageletM.register("pl.part.areaList",function(a){var b=a.E("pl_part_areaList"),c={};if(!b){a.log("[pl.part.areaList] You should provide the node");return c}c=a.comp.part.homeTopicList(b);return c});
STK.register("kit.dom.parentElementBy",function(a){return function(a,b,c){if(!a||!b)throw new Error("传入的参数为空");var d=0,e;a=a.parentNode;while(a.parentNode){d++;e=c(a);if(e===!1)return!1;if(e===!0)return a;if(e===b)return null;a=a.parentNode;if(d>3e4)return!1}return null}});
STK.register("common.trans.bar",function(a){var b=a.kit.io.inter(),c=b.register;c("bar_list",{url:"/aj_t/postlist",method:"get"});c("get_location",{url:"/aj_topiclist/location",method:"get"});return b});
STK.register("kit.dom.hover",function(a){return function(b){var c=b.delay||100,d=b.isover||!1,e=b.act,f=b.extra||[],g=null,h=function(a){d&&b.onmouseover.apply(e,[a])},i=function(a){d||b.onmouseout.apply(e,[a])},j=function(a){d=!0;g&&clearTimeout(g);g=setTimeout(function(){h(a)},c)},k=function(a){d=!1;g&&clearTimeout(g);g=setTimeout(function(){i(a)},c)};a.core.evt.addEvent(e,"mouseover",j);a.core.evt.addEvent(e,"mouseout",k);for(var l=0,m=f.length;l<m;l+=1){a.core.evt.addEvent(f[l],"mouseover",j);a.core.evt.addEvent(f[l],"mouseout",k)}var n={};n.destroy=function(){a.core.evt.removeEvent(e,"mouseover",j);a.core.evt.removeEvent(e,"mouseout",k);for(var b=0,c=f.length;b<c;b+=1){a.core.evt.removeEvent(f[b],"mouseover",j);a.core.evt.removeEvent(f[b],"mouseout",k)}};return n}});
STK.register("kit.dom.layoutPos",function(a){return function(b,c,d){if(!a.isNode(c))throw"kit.dom.layerOutElement need element as first parameter";if(c===document.body)return!1;if(!c.parentNode)return!1;if(c.style.display==="none")return!1;var e,f,g,h,i,j,k;e=a.parseParam({pos:"left-bottom",offsetX:0,offsetY:0},d);f=c;if(!f)return!1;while(f!==document.body){f=f.parentNode;if(f.style.display==="none")return!1;j=a.getStyle(f,"position");k=f.getAttribute("layout-shell");if(j==="absolute"||j==="fixed")break;if(k==="true"&&j==="relative")break}f.appendChild(b);g=a.position(c,{parent:f});h={w:c.offsetWidth,h:c.offsetHeight};i=e.pos.split("-");i[0]==="left"?b.style.left=g.l+e.offsetX+"px":i[0]==="right"?b.style.left=g.l+h.w+e.offsetX+"px":i[0]==="center"&&(b.style.left=g.l+h.w/2+e.offsetX+"px");i[1]==="top"?b.style.top=g.t+e.offsetY+"px":i[1]==="bottom"?b.style.top=g.t+h.h+e.offsetY+"px":i[1]==="middle"&&(b.style.top=g.t+h.h/2+e.offsetY+"px");return!0}});
STK.register("kit.extra.swfobject",function(a){var b=function(){function W(b){var c=/[\\\"<>\.;]/,d=c.exec(b)!=null;return d&&typeof encodeURIComponent!=a?encodeURIComponent(b):b}function V(a,b){if(!!y){var c=b?"visible":"hidden";u&&Q(a)?Q(a).style.visibility=c:U("#"+a,"visibility:"+c)}}function U(b,d,e,f){if(!z.ie||!z.mac){var g=j.getElementsByTagName("head")[0];if(!g)return;var h=e&&typeof e=="string"?e:"screen";if(f){w=null;x=null}if(!w||x!=h){var i=R("style");i.setAttribute("type","text/css");i.setAttribute("media",h);w=g.appendChild(i);z.ie&&z.win&&typeof j.styleSheets!=a&&j.styleSheets.length>0&&(w=j.styleSheets[j.styleSheets.length-1]);x=h}z.ie&&z.win?w&&typeof w.addRule==c&&w.addRule(b,d):w&&typeof j.createTextNode!=a&&w.appendChild(j.createTextNode(b+" {"+d+"}"))}}function T(a){var b=z.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function S(a,b,c){a.attachEvent(b,c);p[p.length]=[a,b,c]}function R(a){return j.createElement(a)}function Q(a){var b=null;try{b=j.getElementById(a)}catch(c){}return b}function P(a){var b=Q(a);if(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode.removeChild(b)}}function O(a){var b=Q(a);if(b&&b.nodeName=="OBJECT")if(z.ie&&z.win){b.style.display="none";(function(){b.readyState==4?P(a):setTimeout(arguments.callee,10)})()}else b.parentNode.removeChild(b)}function N(a,b,c){var d=R("param");d.setAttribute("name",b);d.setAttribute("value",c);a.appendChild(d)}function M(b,d,e){var g,h=Q(e);if(z.wk&&z.wk<312)return g;if(h){typeof b.id==a&&(b.id=e);if(z.ie&&z.win){var i="";for(var j in b)b[j]!=Object.prototype[j]&&(j.toLowerCase()=="data"?d.movie=b[j]:j.toLowerCase()=="styleclass"?i+=' class="'+b[j]+'"':j.toLowerCase()!="classid"&&(i+=" "+j+'="'+b[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>";o[o.length]=b.id;g=Q(b.id)}else{var m=R(c);m.setAttribute("type",f);for(var n in b)b[n]!=Object.prototype[n]&&(n.toLowerCase()=="styleclass"?m.setAttribute("class",b[n]):n.toLowerCase()!="classid"&&m.setAttribute(n,b[n]));for(var p in d)d[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"&&N(m,p,d[p]);h.parentNode.replaceChild(m,h);g=m}}return g}function L(a){var b=R("div");if(z.win&&z.ie)b.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(c)[0];if(d){var e=d.childNodes;if(e){var f=e.length;for(var g=0;g<f;g++)(e[g].nodeType!=1||e[g].nodeName!="PARAM")&&e[g].nodeType!=8&&b.appendChild(e[g].cloneNode(!0))}}}return b}function K(a){if(z.ie&&z.win&&a.readyState!=4){var b=R("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(L(a),b);a.style.display="none";(function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(L(a),a)}function J(b,c,d,e){v=!0;s=e||null;t={success:!1,id:d};var f=Q(d);if(f){if(f.nodeName=="OBJECT"){q=L(f);r=null}else{q=f;r=d}b.id=g;if(typeof b.width==a||!/%$/.test(b.width)&&parseInt(b.width,10)<310)b.width="310";if(typeof b.height==a||!/%$/.test(b.height)&&parseInt(b.height,10)<137)b.height="137";j.title=j.title.slice(0,47)+" - Flash Player Installation";var h=z.ie&&z.win?"ActiveX":"PlugIn",k="MMredirectURL="+i.location.toString().replace(/&/g,"%26")+"&MMplayerType="+h+"&MMdoctitle="+j.title;typeof c.flashvars!=a?c.flashvars+="&"+k:c.flashvars=k;if(z.ie&&z.win&&f.readyState!=4){var l=R("div");d+="SWFObjectNew";l.setAttribute("id",d);f.parentNode.insertBefore(l,f);f.style.display="none";(function(){f.readyState==4?f.parentNode.removeChild(f):setTimeout(arguments.callee,10)})()}M(b,c,d)}}function I(){return!v&&T("6.0.65")&&(z.win||z.mac)&&!(z.wk&&z.wk<312)}function H(b){var d=null,e=Q(b);if(e&&e.nodeName=="OBJECT")if(typeof e.SetVariable!=a)d=e;else{var f=e.getElementsByTagName(c)[0];f&&(d=f)}return d}function G(){var b=n.length;if(b>0)for(var c=0;c<b;c++){var d=n[c].id,e=n[c].callbackFn,f={success:!1,id:d};if(z.pv[0]>0){var g=Q(d);if(g)if(T(n[c].swfVersion)&&!(z.wk&&z.wk<312)){V(d,!0);if(e){f.success=!0;f.ref=H(d);e(f)}}else if(n[c].expressInstall&&I()){var h={};h.data=n[c].expressInstall;h.width=g.getAttribute("width")||"0";h.height=g.getAttribute("height")||"0";g.getAttribute("class")&&(h.styleclass=g.getAttribute("class"));g.getAttribute("align")&&(h.align=g.getAttribute("align"));var i={},j=g.getElementsByTagName("param"),k=j.length;for(var l=0;l<k;l++)j[l].getAttribute("name").toLowerCase()!="movie"&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));J(h,i,d,e)}else{K(g);e&&e(f)}}else{V(d,!0);if(e){var m=H(d);if(m&&typeof m.SetVariable!=a){f.success=!0;f.ref=m}e(f)}}}}function F(){var b=j.getElementsByTagName("body")[0],d=R(c);d.setAttribute("type",f);var e=b.appendChild(d);if(e){var g=0;(function(){if(typeof e.GetVariable!=a){var c=e.GetVariable("$version");if(c){c=c.split(" ")[1].split(",");z.pv=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]}}else if(g<10){g++;setTimeout(arguments.callee,10);return}b.removeChild(d);e=null;G()})()}else G()}function E(){l?F():G()}function D(b){if(typeof i.addEventListener!=a)i.addEventListener("load",b,!1);else if(typeof j.addEventListener!=a)j.addEventListener("load",b,!1);else if(typeof i.attachEvent!=a)S(i,"onload",b);else if(typeof i.onload=="function"){var c=i.onload;i.onload=function(){c();b()}}else i.onload=b}function C(a){u?a():m[m.length]=a}function B(){if(!u){try{var a=j.getElementsByTagName("body")[0].appendChild(R("span"));a.parentNode.removeChild(a)}catch(b){return}u=!0;var c=m.length;for(var d=0;d<c;d++)m[d]()}}var a="undefined",c="object",d="Shockwave Flash",e="ShockwaveFlash.ShockwaveFlash",f="application/x-shockwave-flash",g="SWFObjectExprInst",h="onreadystatechange",i=window,j=document,k=navigator,l=!1,m=[E],n=[],o=[],p=[],q,r,s,t,u=!1,v=!1,w,x,y=!0,z=function(){var b=typeof j.getElementById!=a&&typeof j.getElementsByTagName!=a&&typeof j.createElement!=a,g=k.userAgent.toLowerCase(),h=k.platform.toLowerCase(),m=h?/win/.test(h):/win/.test(g),n=h?/mac/.test(h):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof k.plugins!=a&&typeof k.plugins[d]==c){r=k.plugins[d].description;if(r&&(typeof k.mimeTypes==a||!k.mimeTypes[f]||!!k.mimeTypes[f].enabledPlugin)){l=!0;p=!1;r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1");q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10);q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10);q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof i.ActiveXObject!=a)try{var s=new ActiveXObject(e);if(s){r=s.GetVariable("$version");if(r){p=!0;r=r.split(" ")[1].split(",");q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]}}}catch(t){}return{w3:b,pv:q,wk:o,ie:p,win:m,mac:n}}(),A=function(){if(!!z.w3){(typeof j.readyState!=a&&j.readyState=="complete"||typeof j.readyState==a&&(j.getElementsByTagName("body")[0]||j.body))&&B();if(!u){typeof j.addEventListener!=a&&j.addEventListener("DOMContentLoaded",B,!1);if(z.ie&&z.win){j.attachEvent(h,function(){if(j.readyState=="complete"){j.detachEvent(h,arguments.callee);B()}});i==top&&function(){if(!u){try{j.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}B()}}()}z.wk&&function(){if(!u){if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}B()}}();D(B)}}}(),X=function(){z.ie&&z.win&&window.attachEvent("onunload",function(){var a=p.length;for(var c=0;c<a;c++)p[c][0].detachEvent(p[c][1],p[c][2]);var d=o.length;for(var e=0;e<d;e++)O(o[e]);for(var f in z)z[f]=null;z=null;for(var g in b)b[g]=null;b=null})}();return{registerObject:function(a,b,c,d){if(z.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;n[n.length]=e;V(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(z.w3)return H(a)},embedSWF:function(b,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};if(z.w3&&!(z.wk&&z.wk<312)&&b&&d&&e&&f&&g){V(d,!1);C(function(){e+="";f+="";var n={};if(k&&typeof k===c)for(var o in k)n[o]=k[o];n.data=b;n.width=e;n.height=f;var p={};if(j&&typeof j===c)for(var q in j)p[q]=j[q];if(i&&typeof i===c)for(var r in i)typeof p.flashvars!=a?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(T(g)){var s=M(n,p,d);n.id==d&&V(d,!0);m.success=!0;m.ref=s}else{if(h&&I()){n.data=h;J(n,p,d,l);return}V(d,!0)}l&&l(m)})}else l&&l(m)},switchOffAutoHideShow:function(){y=!1},ua:z,getFlashPlayerVersion:function(){return{major:z.pv[0],minor:z.pv[1],release:z.pv[2]}},hasFlashPlayerVersion:T,createSWF:function(a,b,c){return z.w3?M(a,b,c):undefined},showExpressInstall:function(a,b,c,d){z.w3&&I()&&J(a,b,c,d)},removeSWF:function(a){z.w3&&O(a)},createCSS:function(a,b,c,d){z.w3&&U(a,b,c,d)},addDomLoadEvent:C,addLoadEvent:D,getQueryParamValue:function(a){var b=j.location.search||j.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return W(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return W(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(v){var a=Q(g);if(a&&q){a.parentNode.replaceChild(q,a);if(r){V(r,!0);z.ie&&z.win&&(q.style.display="block")}s&&s(t)}v=!1}}}}();return b});
STK.register("common.flash.serialchart",function(a){var b=$CONFIG.jsPath+"topic/static/flash/";return function(c){var d=a.kit.extra.swfobject,e={id:c.id,swf:b+"serialchart.swf?version="+$CONFIG.version,h:c.h||100,w:c.w||190,exp_swf:b+"img/expressInstall.swf?version="+$CONFIG.version,version:"10.0.0",channel:c.id+"_channel"},f={},g={readyCallback:"topicSerialChartShow",channel:e.channel},h={menu:"false",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always",bgcolor:"#ffffff",wmode:"direct"},i={init:function(){i.build()},build:function(){a.kit.extra.swfobject.embedSWF(e.swf,e.id,e.w,e.h,e.version,e.exp_swf,g,h)},bind:function(){for(var a in swfAct)swfAct[a]&&!i.checkAction(e.channel,a)&&STK.core.util.listener.register(e.channel,a,swfAct[a])},checkAction:function(a,b){var c=STK.core.util.listener.list();return!!c[a]&&!!c[a][b]},getFlash:function(){return navigator.appName.indexOf("Microsoft")!=-1?window[c.id]:document[c.id]}};i.init();window.topicSerialChartShow=function(){d.getObjectById(e.id).setData(c.trend_hotval);d.getObjectById(e.id).setConfig({colors:["#F5502F","#F5502F"],categoryKey:"date",graphs:[{name:"24小时走势",valueKey:"f",type:"line"}],legend:{}});var b=parseInt(a.E(e.id).getAttribute("width"),10);a.E(e.id).setAttribute("width",b+1)};return f}});
STK.register("common.layer.changeRegion",function(a){var b=a.kit.extra.language;return function(b){var c={},d=$CONFIG.bigpipe=="true",e,f=null,g={hide:function(){if(a.contains(document.body,f)){f.style.display="none";a.removeEvent(document.body,"click",g.hide)}}},h={},i={},j={},k=function(){l();m();n();o();p();q();r()},l=function(){},m=function(){e={}},n=function(){f=a.C("div");f.innerHTML=b.inner;f.style.cssText="position: absolute; top: 0px; width: 270px; z-index: 2000; left: 0px;diaplay: none";f.className="search_more_layer clearfix";document.body.appendChild(f)},o=function(){},p=function(){},q=function(){},r=function(){},s=function(){};c.destroy=s;c.show=function(a){f.style.display="";f.style.left=a.l+"px";f.style.top=a.t+"px"};c.getLayer=function(){return f};c.hide=function(){f&&(f.style.display="none")};k();return c}});
STK.register("comp.content.interestTopic",function(a){var b=a.kit.extra.language,c=b('<div node-type="main-tips" style="text-align:center;" class="W_loading"><span>#L{正在加载，请稍候...}</span></div>'),d=b('<div node-type="main-tips" style="text-align:center;"><span>#L{加载失败，}<a href="javascript:;" onclick="return false;" action-type="{t}" action-data="{p}">#L{请重试}</a></span></div>'),e=b('<div node-type="small-tips" style="text-align:center;padding-bottom: 5px;" class="W_loading"><span>#L{正在加载，请稍候...}</span></div>'),f=b('<div node-type="small-tips" style="text-align:center;padding-bottom: 5px;"><span>#L{加载失败，}<a href="javascript:;" onclick="return false;" action-type="{t}" action-data="{p}">#L{请重试}</a></span></div>'),g='<div class="inner"><i class="W8_fonticons W8_linecolor_fc">w</i><i class="W8_fonticons W8_bgcolor_fc">w</i></div><div class="info"><p>热门话题榜帮你发现微博上正在热议的新鲜话题。单位时间内真实有效的##原创人数是话题榜排序关键指标（热度值）。</p><p class="more"><a target="_blank" href="http://huati.weibo.com/about/intro">更多»</a></p></div>';return function(b,h){var i={},j=$CONFIG.bigpipe=="true",l,m=a.core.evt.delegatedEvent(b),n=null,o=!1,p=null,q={},r=null,s=null,t=null,u=null,v=a.core.dom.getSize,w=null,x=0,y=!0,z={mainRetry:function(a){o||A.queryMain(a.data)},smallRetry:function(a){o||A.queryList(a.data)},mainList:function(b){if(!o){var c=b.el;if(p==c){t&&t.hide();return}p=c;n=a.core.json.clone(b.data);A.updateURL(n);A.queryMain(n);a.foreach(l.leftList,function(b,c){/cur/.test(b.className)&&a.core.dom.removeClassName(b,"cur")});var d=a.core.dom.contains(l.leftNav,c);if(d)a.core.dom.addClassName(c.parentNode,"cur");else if(n.ctg1==="99"&&n.ctg2==="1"){var e=a.sizzle("li[ctgId=99_1]",l.leftNav)[0];a.core.dom.addClassName(e,"cur")}else{var e=a.sizzle("li[ctgId="+n.ctg1+"]",l.leftNav)[0];e&&a.core.dom.addClassName(e,"cur")}t&&t.hide();t=null}},mover:function(b){var c=b.el;a.core.dom.addClassName(c.parentNode,"hover")},mout:function(b){var c=b.el;a.core.dom.removeClassName(c.parentNode,"hover")},smallList:function(b){var c=b.el,d=b.el,e;if(d.tagName!="SPAN"){"p"in b.data||(b.data.p=1);a.foreach(b.data,function(a,b){b in n&&(n[b]=a)});A.updateURL(n);if(!a.core.dom.contains(l.listSmall,d)){var f=a.kit.dom.parentElementBy(d,l.listSmall,function(a){if(a.tagName=="UL")return!0}),g=a.sizzle("span[action-type=small-list]",f)[0];if(g){g.style.display="none";e='<a href="javascript:;" onclick="return false;" action-type="small-list" action-data="'+g.getAttribute("action-data")+'" suda-uatrack="'+g.getAttribute("suda-uatrack")+'">'+g.innerHTML+"</a>";a.core.dom.insertHTML(g,e,"afterend");a.removeNode(g)}d.style.display="none";e='<span class="cur" action-type="small-list" action-data="'+d.getAttribute("action-data")+'" suda-uatrack="'+d.getAttribute("suda-uatrack")+'">'+d.innerHTML+"</span>";a.core.dom.insertHTML(d,e,"afterend");a.removeNode(d)}A.queryList(n);t&&t.hide();t=null;return!1}},showTopic:function(b){var c=b.evt.target||b.evt.srcElement,d=b.data;if(c.tagName!="A"){window.open("http://"+location.host+d.url);a.core.evt.stopEvent()}},showHot:function(c){if(r!=null){r.abort();r=null}var d=c.data,e=d.tid||"",f="",g=c.el,h=a.kit.dom.parentElementBy(g,b,function(a){if(a.getAttribute("action-type")=="show-topic")return!0}),i=a.queryToJson(h.getAttribute("action-data")).topic;i&&(d.topic=a.core.str.decodeHTML(i));var j=e+d.topic,k=q[j];if(k){if(k.style.display!="none")return;for(var l in q)q[l].style.display="none";k.style.display=""}else{var m=d;d.topic&&(m.topic=a.core.str.decodeHTML(d.topic));o=!0;r=a.common.trans.partRefresh.getTrans("interest_topicTemper",{onSuccess:function(b){o=!1;k=a.C("DIV");k.className="notice_hotvalue";k.innerHTML=b.data.html;k.style.position="absolute";for(var c in q)q[c].style.display="none";a.kit.dom.hover({act:g,delay:45,extra:[k],onmouseover:function(){k.style.display=""},onmouseout:function(){k.style.display="none"}});document.body.appendChild(k);q[j]=k;var d=a.core.dom.getSize(g),e=a.core.dom.getSize(k),f=d.width/2-e.width/2;a.kit.dom.layoutPos(k,g,{pos:"left-top",offsetX:f,offsetY:25});r=null;if(b.data.trend_hotval){var h={id:"swf_chart_"+a.getUniqueKey()},i=a.C("div");i.className="data";var l=a.C("div");l.setAttribute("id",h.id);i.appendChild(l);k.appendChild(i);h.trend_hotval=b.data.trend_hotval;A.newChartSwf(h)}},onError:function(a){r=null},onFail:function(){r=null}});r.request(m)}},numMover:function(a){var b=a;s=setTimeout(function(){z.showHot(b)},100)},numMout:function(a){if(s){clearTimeout(s);if(r!=null){r.abort();r=null}}},topicOver:function(b){a.addClassName(b.el,"hover")},topicOut:function(b){a.removeClassName(b.el,"hover")},showRegion:function(c){if(t){l.toggleArea=a.sizzle("a[action-type=toggleArea]",b)[0];var d=a.core.dom.position(l.toggleArea.parentNode);t.show({l:d.l-12,t:d.t+25})}else{if(o)return!1;o=!0;var e=a.common.trans.bar.getTrans("get_location",{onSuccess:function(c){o=!1;t=a.common.layer.changeRegion({inner:c.data.html});var d=t.getLayer();u=a.core.evt.delegatedEvent(d);u.add("main-list","click",z.mainList);u.add("close","click",t.hide);l.toggleArea=a.sizzle("a[action-type=toggleArea]",b)[0];var e=a.core.dom.position(l.toggleArea.parentNode);t.show({l:e.l-12,t:e.t+25})},onError:function(a){o=!1},onFail:function(){o=!1}});e.request(a.core.json.clone(c.data))}},askOver:function(b){var c=a.fixEvent(b).target;if(c===l.askIcon){if(w){w.style.display="";return}x=setTimeout(function(){A.showTipLayer()},100)}},askOut:function(b){var c=a.fixEvent(b).target;c===l.askIcon&&(x?clearTimeout(x):w&&(w.style.display="none"))}},A={showTipLayer:function(){w=a.C("DIV");w.className="notice_hotvalue";w.style.position="absolute";w.innerHTML=g;a.kit.dom.hover({act:l.askIcon,delay:45,extra:[w],onmouseover:function(){w.style.display=""},onmouseout:function(){w.style.display="none"}});document.body.appendChild(w);var b=a.core.dom.getSize(w),c=a.core.dom.getSize(l.askIcon);a.log((0-b.width+c.width)/2);a.kit.dom.layoutPos(w,l.askIcon,{pos:"left-top",offsetX:(0-b.width+c.width)/2,offsetY:26})},updateURL:function(b){if(!!j){b=a.core.json.clone(b);var c=a.core.json.queryToJson(location.search.toString().substr(1));a.foreach(c,function(a,c){c!="$nullname"&&(c in b||(b[c]=null))});STK.historyM.setQuery(b)}},addMainTips:function(b){var c=a.sizzle("div[node-type=main-tips]",l.listMain)[0];c&&a.removeNode(c);a.core.dom.insertHTML(l.listMain,b,"afterbegin")},addSmallTips:function(b){var c=a.sizzle("div[node-type=small-tips]",l.listSmall)[0];c&&a.removeNode(c);var d=a.sizzle("[list-top=1]",l.listSmall)[0];d?a.core.dom.insertHTML(d,b,"afterend"):a.core.dom.insertHTML(l.listSmall,b,"afterbegin")},getMainTips:function(){return a.sizzle("div[node-type=main-tips]",l.listMain)[0]},getSmallTips:function(){return a.sizzle("div[node-type=small-tips]",l.listSmall)[0]},queryMain:function(e){o=!0;l.listMain.innerHTML=c;var f=a.common.trans.partRefresh.getTrans("interest_listMain",{onSuccess:function(c){o=!1;l.listMain.innerHTML=c.data.html;l.listSmall=a.sizzle("div[node-type=list-small]",b)[0];l.askIcon=a.sizzle("i[node-type=ask-hover]",b)[0];a.addEvent(l.askIcon,"mouseover",z.askOver);a.addEvent(l.askIcon,"mouseout",z.askOut);A.loadAd()},onError:function(b){o=!1;A.addMainTips(d.replace(/\{p\}/g,a.core.json.jsonToQuery(e)).replace(/\{t\}/g,"main-retry"))},onFail:function(){o=!1;A.addMainTips(d.replace(/\{p\}/g,a.core.json.jsonToQuery(e)).replace(/\{t\}/g,"main-retry"))}});if(y){y=!1;f.request(e)}else{var g={_pv:1};for(k in e)g[k]=e[k];f.request(g)}},queryList:function(c){o=!0;A.addSmallTips(e);var d=a.common.trans.partRefresh.getTrans("interest_classList",{onSuccess:function(c){o=!1;l.listSmall.innerHTML=c.data.html;var d=a.position(b);window.scrollTo(0,d.t-100);q={};A.loadAd()},onError:function(b){o=!1;A.addSmallTips(f.replace(/\{p\}/g,a.core.json.jsonToQuery(c)).replace(/\{t\}/g,"small-retry"))},onFail:function(){o=!1;A.addSmallTips(f.replace(/\{p\}/g,a.core.json.jsonToQuery(c)).replace(/\{t\}/g,"small-retry"))}}),g={_pv:1};for(k in c)g[k]=c[k];d.request(g)},loadNav:function(b){var c=a.core.json.queryToJson(l.leftNav.getAttribute("node-data"));n=a.core.json.clone(c);A.queryMain(c)},newChartSwf:function(b){a.common.flash.serialchart(b)},loadAd:function(){var b=a.sizzle("[node-type=adTopic]")[0];!b||(window.WBAD&&window.WBAD.restart?window.WBAD.restart(null,{node:b}):a.core.io.scriptLoader({url:"http://js.t.sinajs.cn/t4/apps/publicity/static/wbadRequire.js?version="+$CONFIG.version,onComplete:function(a){b&&window.WBAD&&window.WBAD.restart(null,{node:b})},onTimeout:function(){},onFail:function(){}}))}},B={},C={},D=function(){E();F();G();H();I();J();K();for(var b=l.leftList.length-1;b>=0;b--)if(a.core.dom.hasClassName(l.leftList[b],"cur")){p=a.sizzle("a[action-type=main-list]",l.leftList[b])[0];break}if(window.console){console.log("你是否想探索这里的秘密？\n你是否想成为这里的主人？\n加入微博，加入微话题！You are the one ！");console.log("请将简历发送至 %c chengxuan@staff.sina.com.cn （邮件标题以“姓名-console-简历”命名）","color:red;");console.log("职位介绍：http://weibo.com/1150169277/AFcP0svLS")}},E=function(){if(b==null)throw"[comp.content.interestTopic]:argsCheck()-You should provide the node."},F=function(){l={leftNav:a.sizzle("ul[node-type=left-nav]",b)[0],listMain:a.sizzle("div[node-type=list-main]",b)[0],listSmall:a.sizzle("div[node-type=list-small]",b)[0]};l.leftList=a.sizzle("LI",l.leftNav)},G=function(){},H=function(){m.add("main-retry","click",z.mainRetry);m.add("main-list","click",z.mainList);m.add("main-list","mouseover",z.mover);m.add("main-list","mouseout",z.mout);m.add("small-retry","click",z.smallRetry);m.add("small-list","click",z.smallList);m.add("show-topic","mouseover",z.topicOver);m.add("show-topic","mouseout",z.topicOut);m.add("show-hot","mouseover",z.numMover);m.add("show-hot","mouseout",z.numMout);m.add("toggleArea","click",z.showRegion)},I=function(){},J=function(){},K=function(){},L=function(){m.destroy()};i.destroy=L;D();A.loadNav();return i}});
STK.pageletM.register("pl.content.interestTopic",function(a){var b=a.E("pl_content_interestTopic"),c={};if(!b)return c;c=a.comp.content.interestTopic(b);return c});
STK.register("kit.dom.parseDOM",function(a){return function(a){for(var b in a)a[b]&&a[b].length==1&&(a[b]=a[b][0]);return a}});
STK.register("common.trans.global",function(a){var b=a.kit.io.inter(),c=b.register;c("language",{url:"/ajax/settings/lang",method:"post"});c("followList",{url:"/ajax/mblog/attention"});c("attention",{url:"/aj_friendships/followed",method:"post"});c("attentionViaHost",{url:"/aj_emcee/follow",method:"post"});c("delattention",{url:"/aj_friendships/unfollow",method:"post"});c("unblock",{url:"/aj_friendships/unblock",method:"post"});c("joinbar",{url:"/aj_f/joinbar",method:"post"});c("quitbar",{url:"/aj_f/quitbar",method:"post"});c("forbidUser",{url:"/aj_f/bladd",method:"post"});c("tips_close",{url:"/aj_oneop/close",method:"post"});c("usercard",{url:"/aj_card/show",method:"post"});c("topicurl",{url:"/aj_topic/showUrl",method:"get"});return b});
STK.register("kit.dom.textSelection",function(a){return function(b,c){var d,e;d={};e=a.parseParam({},c);var f=function(c){return a.core.dom.selectText(b,c)},g=function(){b.__areaQuery=a.jsonToQuery(a.core.dom.textSelectArea(b))},h=function(){b.__areaQuery=!1};a.addEvent(b,"beforedeactivate",g);a.addEvent(b,"active",h);var i=function(){var c=null;try{c=a.core.dom.textSelectArea(b)}catch(d){c=a.queryToJson(b.__areaQuery)}c.start===0&&c.len===0&&b.__areaQuery&&(c=a.queryToJson(b.__areaQuery));c.start=parseInt(c.start,10);c.len=parseInt(c.len,10);return c},j=function(a,c){var d=b.value,e=c.start,f=c.len||0,g=d.slice(0,e),h=d.slice(e+f,d.length);b.value=g+a+h;d=null;g=null;h=null;var e=null,f=null};d.setCursor=function(a){f(a)};d.getCursor=function(){return i()};d.insertCursor=function(a){var b=i();j(a,b);b.len=a.length;f(b)};d.TempletCursor=function(c){var d,e,g;d=i();d.len>0?e=b.value.substr(d.start,d.len):e="";g=a.templet(c,{origin:e});j(g,d);d.start=d.start+c.indexOf("#{origin");d.len=g.length-c.replace(/#\{[origin].+?\}/,"").length;f(d)};d.insertText=j;d.destroy=function(){a.removeEvent(b,"beforedeactivate",g);a.removeEvent(b,"active",h);b=null};return d}});
STK.register("kit.dom.smartInput",function(a){return function(b,c){var d,e,f,g,h,i,j,k,l,m="stop",n,o,p;d=a.parseParam({notice:"",noticeClass:null,noticeStyle:null,maxLength:null,needLazyInput:!1,LazyInputDelay:200,isByteLength:!0},c);e=a.cascadeNode(b);h=a.kit.dom.textSelection(b);a.custEvent.define(e,"enter");a.custEvent.define(e,"ctrlEnter");a.custEvent.define(e,"lazyInput");f=function(){d.maxLength&&(d.isByteLength==!1?b.value.length>d.maxLength&&(b.value=b.value.substr(0,d.maxLength)):a.bLength(b.value)>d.maxLength&&(b.value=a.leftB(b.value,d.maxLength)))};focusNotice=function(){if(b.value===d.notice){b.value="";d.noticeClass!=null&&a.removeClassName(b,d.noticeClass)}};blurNotice=function(){if(b.value===""){b.value=d.notice;d.noticeClass!=null&&a.addClassName(b,d.noticeClass)}};g=function(){f();return b.value===d.notice?"":b.value};o=function(b){b.keyCode===13&&a.custEvent.fire(e,"enter",g())};p=function(b){(b.keyCode===13||b.keyCode===10)&&b.ctrlKey&&a.custEvent.fire(e,"ctrlEnter",g())};i=function(){if(m==="stop"){l=setInterval(k,d.LazyInputDelay);m="sleep"}};j=function(){clearInterval(l);m="stop"};k=function(){if(n===b.value)if(m==="weakup"){a.custEvent.fire(e,"lazyInput",b.value);m="sleep"}else m==="waiting"&&(m="weakup");else m="waiting";n=b.value};if(d.needLazyInput){a.addEvent(b,"focus",i);a.addEvent(b,"blur",j)}a.addEvent(b,"focus",focusNotice);a.addEvent(b,"blur",blurNotice);a.addEvent(b,"keyup",f);a.addEvent(b,"keypress",o);a.addEvent(b,"keypress",p);e.getValue=g;e.setValue=function(a){b.value=a;f();return e};e.setNotice=function(a){d.notice=a;return e};e.setNoticeClass=function(a){d.noticeClass=a;return e};e.setNoticeStyle=function(a){d.noticeStyle=a;return e};e.setMaxLength=function(a){d.maxLength=a;return e};e.restart=function(){blurNotice()};e.startLazyInput=i;e.stopLazyInput=j;e.setCursor=h.setCursor;e.getCursor=h.getCursor;e.insertCursor=h.insertCursor;e.insertText=h.insertText;e.destroy=function(){if(d.needLazyInput){a.removeEvent(b,"focus",focusNotice);a.removeEvent(b,"blur",blurNotice)}j();a.removeEvent(b,"focus",focusNotice);a.removeEvent(b,"blur",blurNotice);a.removeEvent(b,"keyup",f);a.removeEvent(b,"keypress",o);a.removeEvent(b,"keypress",p);a.custEvent.undefine(e,"enter");a.custEvent.undefine(e,"ctrlEnter");a.custEvent.undefine(e,"lazyInput");h.destroy();e=null};return e}});
STK.register("common.ui.hoverTips",function(a){var b=a.kit.extra.language;return function(b,c){var d={},e=$CONFIG.bigpipe=="true";c=a.kit.extra.merge({msg:"",getPos:null,timer:0},c||{});var f=null,g=0,h='<div class="arrow"><div class="inner"><i class="W8_fonticons W8_linecolor_fc">a</i><i class="W8_fonticons W8_bgcolorb_fc">a</i></div></div><div class="cont W_textb"><p class="info">{MSG}</p></div>',i=null,j=c.getPos,k={showTips:function(){if(f){g&&clearTimeout(g);l.setPos(j(b));f.style.display=""}else{l.builder();d.setPos(j(b));document.body.appendChild(f)}},hideTips:function(){g=setTimeout(function(){f&&(f.style.display="none")},200)}},l={builder:function(){f=a.C("div");f.style.zIndex=999;h=h.replace("{MSG}",c.msg);f.innerHTML=h;f.className="issue_tips W_textb";f.style.position="absolute";a.addEvent(f,"mouseover",k.showTips);a.addEvent(f,"mouseout",k.hideTips)},setPos:function(a){if(f){f.style.left=a.l+"px";f.style.top=a.t+"px"}}},m={},n={},o=function(){p();q();r();s();t();u();v()},p=function(){if(typeof c.getPos!="function")throw"[common.ui.hoverTips]:argsCheck()-You should provide the getPos function."},q=function(){},r=function(){},s=function(){a.addEvent(b,"mouseover",k.showTips);a.addEvent(b,"mouseout",k.hideTips)},t=function(){},u=function(){},v=function(){},w=function(){a.removeEvent(b,"mouseover",k.showTips);a.removeEvent(b,"mouseout",k.hideTips);a.removeEvent(f,"mouseover",k.showTips);a.removeEvent(f,"mouseout",k.hideTips)};d.destroy=w;d.setPos=l.setPos;o();return d}});
STK.register("common.extra.shineBorder",function(a){var b=function(a){return a.slice(0,a.length-1).concat(a.concat([]).reverse())};return function(c,d){var e=a.parseParam({start:"#fff",color:"#fbb",times:2,step:5,width:1,style:"solid"},d);c.style.borderWidth=e.width+"px";c.style.borderStyle=e.style;var f=e.start.split(""),g=e.color.split(""),h=[];for(var i=0;i<e.step;i+=1){var j=f[0];for(var k=1;k<4;k+=1){var l=parseInt(f[k],16),m=parseInt(g[k],16);j+=Math.floor(parseInt(l+(m-l)*i/e.step,10)).toString(16)}h.push(j)}for(var i=0;i<e.times;i+=1)h=b(h);var n=!1,o=a.timer.add(function(){if(!h.length)a.timer.remove(o);else{if(n){n=!1;return}n=!0;c.style.borderColor=h.pop()}})}});
STK.register("comp.content.transport",function($){return function(node,opts){function ajax(oOpts){var opts=$.core.obj.parseParam({url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:null,onTimeout:$.core.func.empty,uniqueID:null,onFail:$.core.func.empty,method:"get",asynchronous:!0,header:{},isEncode:!1,responseType:"json"},oOpts);if(opts.url=="")throw"ajax need url in parameters object";var tm,trans=$.core.io.getXHR(),cback=function(){if(trans.readyState==4){clearTimeout(tm);var data="";if(opts.responseType==="xml")data=trans.responseXML;else if(opts.responseType==="text")data=trans.responseText;else try{trans.responseText&&typeof trans.responseText=="string"?data=eval("("+trans.responseText+")"):data={}}catch(exp){data=opts.url+"return error : data error"}trans.status==200?opts.onComplete!=null&&opts.onComplete(data):trans.status!=0&&opts.onFail!=null&&opts.onFail(data,trans)}else opts.onTraning!=null&&opts.onTraning(trans)};trans.onreadystatechange=cback;opts.header["Content-Type"]||(opts.header["Content-Type"]="application/x-www-form-urlencoded");opts.header["X-Requested-With"]||(opts.header["X-Requested-With"]="XMLHttpRequest");opts.timeout&&(tm=setTimeout(function(){try{trans.abort();opts.onTimeout({},trans);opts.onFail({},trans)}catch(a){}},opts.timeout));if(opts.method.toLocaleLowerCase()=="get"){var url=$.core.util.URL(opts.url,{isEncodeQuery:opts.isEncode});url.setParams(opts.args);url.setParam("__rnd",(new Date).valueOf());trans.open(opts.method,url,opts.asynchronous);try{for(var k in opts.header)trans.setRequestHeader(k,opts.header[k])}catch(exp){}trans.send("")}else{trans.open(opts.method,opts.url,opts.asynchronous);try{for(var k in opts.header)trans.setRequestHeader(k,opts.header[k])}catch(exp){}trans.send($.core.json.jsonToQuery(opts.args,opts.isEncode))}return trans}var that={},nodes,lock=!1,defTxt="输入想主持的话题",bindDOMFuns={submit:function(a){if($.common.dialog.quickLogin.isNoLogin())$.common.dialog.quickLogin.show();else{var b=nodes.topic.value;if(b===""||b==defTxt){$.common.extra.shineBorder(nodes.topic);return!1}if(lock)return!1;lock=!0;var c=ajax({url:"/aj_topic/showUrl",onComplete:function(a){lock=!1;if(a.code=="100000"){var b=a.data;nodes.form.action=b.url;b.type=="bind"?nodes.form.type="get":nodes.form.type="post";nodes.form.submit()}else{if(a.code=="100002"){$.common.dialog.quickLogin.show();return!1}$.ui.alert(a.msg,{icon:"error"})}},onFail:function(){$.ui.alert("请求失败，请重试！",{icon:"error"})},onTimeout:function(){nodes.form.action="/k/"+encodeURI(nodes.topic.value);nodes.form.type="get";nodes.form.submit()},timeout:3e3,method:"get",asynchronous:!1,args:{keyword:encodeURI(b)}})}}},bindCustEvtFuns={},bindListenerFuns={},init=function(){argsCheck();parseDOM();initPlugins();bindDOM();bindCustEvt();bindListener()},argsCheck=function(){node||$.log("[comp.content.transport] : missing  -> path : comp.content.transport")},parseDOM=function(){nodes={topic:$.sizzle("input[node-type=apply-topic]",node)[0],submitBtn:$.sizzle("input[node-type=apply-submit]",node)[0],form:$.sizzle("form[node-type=apply-form]",node)[0],tipsIcon:$.sizzle("i[node-type=tips-icon]",node)[0]}},initPlugins=function(){$.kit.dom.smartInput(nodes.topic,{notice:defTxt,noticeClass:"W8_input_default"});nodes.tipsIcon&&(tipsLayer=$.common.ui.hoverTips(nodes.tipsIcon,{getPos:function(a){var b=$.core.dom.position(a),c=$.core.dom.getSize(a);b.l+=c.width+15;b.t-=10;return b},msg:'主持人具有某话题管理权限，同时还享有一定的微博荣誉。<a target="_blank" href="/about/host">查看介绍>> </a>'}))},bindDOM=function(){$.addEvent(nodes.submitBtn,"click",bindDOMFuns.submit);$.core.evt.hotKey.add(nodes.topic,["enter"],bindDOMFuns.submit)},bindCustEvt=function(){},bindListener=function(){},destroy=function(){$.removeEvent(nodes.submitBtn,"click",bindDOMFuns.submit)};init();that.destroy=destroy;return that}});
STK.pageletM.register("pl.content.transport",function(a){var b=a.E("pl_content_transport"),c={};if(!b)return c;c=a.comp.content.transport(b);return c});
STK.register("comp.content.newTopic",function(a){var b=a.kit.extra.language;return function(a,b){var c={},d=$CONFIG.bigpipe=="true",e,f={},g={},h={},i={},j=function(){k();l();m();n();o();p();q()},k=function(){if(a==null)throw"[comp.content.newTopic]:argsCheck()-You should provide the node."},l=function(){e={}},m=function(){},n=function(){},o=function(){},p=function(){},q=function(){},r=function(){};c.destroy=r;j();return c}});
STK.pageletM.register("pl.content.newTopic",function(a){var b=a.E("pl_content_newTopic"),c={};if(!b)return c;c=a.comp.content.newTopic(b);return c});
STK.register("comp.content.hostRanking",function(a){var b=a.kit.extra.language;return function(b,c){var d={},e=$CONFIG.bigpipe=="true",f,g={},h={},i={},j={},k=function(){l();m();n();o();p();q();r()},l=function(){if(b==null)throw"[comp.content.hostRanking]:argsCheck()-You should provide the node."},m=function(){f={tipsIcon:a.sizzle("i[node-type=tips-icon]",b)[0]}},n=function(){f.tipsIcon&&(tipsLayer=a.common.ui.hoverTips(f.tipsIcon,{getPos:function(b){var c=a.core.dom.position(b),d=a.core.dom.getSize(b);c.l+=d.width+15;c.t-=10;return c},msg:"榜单根据前一天话题参与量综合得出"}))},o=function(){},p=function(){},q=function(){},r=function(){},s=function(){};d.destroy=s;k();return d}});
STK.pageletM.register("pl.content.hostRanking",function(a){var b=a.E("pl_content_hostRanking"),c={};if(!b)return c;c=a.comp.content.hostRanking(b);return c});
STK.register("comp.subject.layer.base",function(a){var b=a.kit.extra.language;return function(b,c){var d={},e=$CONFIG.bigpipe=="true",f,g,h=!1,i={close:function(){b!=null&&b.style.display!="none"&&j.close({callback:function(){d.destroy();a.module.mask.back();a.removeNode(b)}})}},j={showLayer:function(){b.style.position="absolute";b.style.display="block";var c=a.core.util.winSize(),d={w:b.offsetWidth,h:b.offsetHeight},e=a.core.util.scrollPos().top+(c.height-d.h)/2;e<0?b.style.top="0px":b.style.top=a.core.util.scrollPos().top+(c.height-d.h)/2+"px";b.style.left=(c.width-d.w)/2+"px";b.style.zIndex=1e4;a.module.mask.showUnderNode(b)},close:function(b){var c=arguments.callee;if(!h){if(a.common.dialog.quickLogin.isNoLogin()){a.common.dialog.quickLogin.show();return}h=!0;var d=a.common.trans.subject.getTrans("layer_close",{onSuccess:function(a){h=!1;b.callback&&b.callback()},onError:function(b){h=!1;b.code=="100002"?a.common.dialog.quickLogin.show():a.ui.alert(b.msg,{icon:"error"})},onFail:function(){h=!1;a.ui.alert(json.msg,{icon:"error"})}});d.request({guide:g})}}},k={},l={},m=function(){n();o();p();q();r();s();t()},n=function(){b!=null},o=function(){f={close:a.sizzle("a[node-type=close]",b)[0]}},p=function(){},q=function(){a.core.evt.addEvent(f.close,"click",i.close)},r=function(){},s=function(){},t=function(){},u=function(){a.core.evt.removeEvent(f.close,"click",i.close)};d.destroy=u;d.needShow=function(){return $CONFIG[c.flag]&&$CONFIG[c.flag]!=""?!0:!1};d.show=function(){if($CONFIG[c.flag]&&$CONFIG[c.flag]!=""){g=$CONFIG[c.flag];m();j.showLayer()}};d.close=function(c){j.close({callback:function(){c.callback&&c.callback();d.destroy();a.module.mask.back();a.removeNode(b)}})};return d}});
STK.register("comp.subject.layer.topicGuide",function(a){var b=a.kit.extra.language;return function(b,c){var d={},e=$CONFIG.bigpipe=="true",f,g,h,i=!1,j,k={iknow:function(a){var b=a.data,c=arguments.callee;j.close({callback:function(){f.share.checked&&l.share()}})}},l={share:function(){var b=arguments.callee;if(!i){i=!0;var c=a.common.trans.publish.getTrans("send",{onSuccess:function(a){i=!1},onError:function(b){i=!1;b.code=="100002"&&a.common.dialog.quickLogin.show()},onFail:function(){i=!1}});c.request({text:"wow~微话题的新首页好好看~[得意地笑] 热点话题一网打尽，兴趣话题五花八门！果断收藏！ http://huati.weibo.com [好喜欢]伦敦奥运正在热议，点击双井号#奥运#，我们一起聊聊吧！",pid:"61b75a83jw1dvg41bu9xbj",keyword:$CONFIG.keyword?$CONFIG.keyword:"",tid:$CONFIG.tid?$CONFIG.tid:0})}}},m={},n={},o=function(){p();q();r();s();t();u();v()},p=function(){b!=null},q=function(){f={share:a.sizzle('[node-type="share"]',b)[0]}},r=function(){},s=function(){g=a.core.evt.delegatedEvent(b);g.add("iknow","click",k.iknow)},t=function(){},u=function(){},v=function(){},w=function(){g.destroy()};d.destroy=w;j=a.comp.subject.layer.base(b,{flag:"guide_all"});if(j.needShow()){o();j.show()}return d}});
STK.pageletM.register("pl.subject.layer.topicGuide",function(a){var b=a.E("pl_subject_layer_topicGuide"),c={};if(!b)return c;c=a.comp.subject.layer.topicGuide(b);return c});
STK.pageletM.register("pl.part.webim",function(a){var b=$CONFIG.version;$CONFIG.$webim&&a.core.io.scriptLoader({url:"http://js.t.sinajs.cn/t5/webim/js/loader.js?version="+b,onComplete:function(a){$WBIM&&$WBIM.loadWebIM({source:"huati"})},onTimeout:function(){},onFail:function(){}});return{}});
STK.register("kit.io.cssLoader",function(a){var b="",c="http://"+$CONFIG.cssPath+"/t4/",d="http://timg.sjs.sinajs.cn/t4/";if(typeof $CONFIG!="undefined"){c=$CONFIG.cssPath||c;b=$CONFIG.version||""}var e={};return function(f,g,h,i,j){i=i||b;h=h||function(){};var k=function(a,b){var c=e[a]||(e[a]={loaded:!1,list:[]});if(c.loaded){b(a);return!1}c.list.push(b);return c.list.length>1?!1:!0},l=function(a){var b=e[a].list;for(var c=0;c<b.length;c++)b[c](a);e[a].loaded=!0;delete e[a].list};if(!!k(f,h)){var m;j?m=d+f:m=c+f+"?version="+i;var n=a.C("link");n.setAttribute("rel","Stylesheet");n.setAttribute("type","text/css");n.setAttribute("charset","utf-8");n.setAttribute("href",m);document.getElementsByTagName("head")[0].appendChild(n);var o=a.C("div");o.id=g;a.core.util.hideContainer.appendChild(o);var p=3e3,q=function(){if(parseInt(a.core.dom.getStyle(o,"height"))==42){a.core.util.hideContainer.removeChild(o);l(f)}else if(--p>0)setTimeout(q,10);else{a.log(f+"timeout!");a.core.util.hideContainer.removeChild(o);delete e[f]}};setTimeout(q,50)}}});
STK.register("ui.litePrompt",function(a){var b=a.kit.extra.language,c=a.core.util.easyTemplate;return function(b,d){var e,f,g,h,i,d=a.parseParam({hideCallback:a.core.func.empty,type:"succM",msg:"",timeout:""},d),j=d.template||'<#et temp data><div class="W8_layer" node-type="outer"><div class="bg"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><div class="content layer_mini" node-type="inner"><p class="clearfix"><i class="W8_imgicons icon_${data.type}"></i>${data.msg}&nbsp; &nbsp; &nbsp;</p></div></td></tr></tbody></table></div></div></#et>',k=c(j,{type:d.type,msg:b}).toString();f={};g=a.module.layer(k);i=g.getOuter();a.custEvent.add(g,"hide",function(){a.module.mask.back();d.hideCallback&&d.hideCallback();a.custEvent.remove(g,"hide",arguments.callee);clearTimeout(h)});a.custEvent.add(g,"show",function(){document.body.appendChild(i);a.module.mask.showUnderNode(i);a.module.mask.getNode().style.zIndex=10002});g.show();d.timeout&&(h=setTimeout(g.hide,d.timeout));var l=a.core.util.winSize(),m=g.getSize(!0);i.style.top=a.core.util.scrollPos().top+(l.height-m.h)/2+"px";i.style.left=(l.width-m.w)/2+"px";i.style.zIndex=10002;f.layer=g;return f}});
STK.register("comp.subject.topicLayer.hotLayer",function(a){var b=a.kit.extra.language,c='<div class="layer_hotvav" node-type="outer" style="position:absolute;"><div class="info"><a href="http://huati.weibo.com/?from=year_center_topbar_hot" node-type="hotLink" target="_blank" class="hot_lk"></a><a href="javascript:;" onclick="return false;" class="close" suda-uatrack="key=tblog_topiclist_activity&value=close_button" node-type="close" title="关闭"></a><div class="op clearfix"><div class="op_share"><p>关注@话题 ，并分享活动微博，<span class="specil">5台iPad mini</span>等你抢，还有10000张<span class="specil">微博会员体验卡</span>等你拿！</p><p><input type="checkbox" checked="checked" id="hotLayer_share_checkbox" node-type="follow" /><label for="share">关注@话题</label></p></div><div class="op_btn"><a href="javascript:;" node-type="share" class="btn">分享并进入话题榜</a></div></div></div><div style="display:none;"><img src="images/tgpg.gif'+$CONFIG.uid+'"></div>'+"</div>";return function(b){var d={},e=$CONFIG.bigpipe=="true",f,g,h=!1,i={close:function(){j.hide()},share:function(){if(a.common.dialog.quickLogin.isNoLogin())a.common.dialog.quickLogin.show();else{if(h)return;var b=f.follow.checked?1:0;h=!0;var c="/aj_mblog/guideshare?oneop_guide=year_center_emcee&is_follow="+b,d=a.common.trans.subject.getTrans("guideShare",{onSuccess:function(b){h=!1;a.ui.litePrompt("分享成功。",{timeout:1e3,type:"succ"});j.hide()},onError:function(b){h=!1;if(b.code=="100002")a.common.dialog.quickLogin.show();else{if(b.code=="20046"){a.common.dialog.certification.show();return}j.hide()}},onFail:function(){j.hide()},url:c});d.request({})}},setPos:function(){var b=a.sizzle("[node-type=hot]",a.E("weibo_top_public"))[0];g.style.left=a.position(b).l-140+"px"}},j={showLayer:function(b){var c=a.core.dom.builder(b);f={outer:c.list.outer[0],close:c.list.close[0],follow:c.list.follow[0],share:c.list.share[0],hotLink:c.list.hotLink[0]};if(location.pathname!="/"){f.share.setAttribute("href","http://huati.weibo.com/?topnav=1&wvr=5");f.share.setAttribute("target","_blank")}g=f.outer;document.body.appendChild(c.box);var d=a.sizzle("[node-type=hot]",a.E("weibo_top_public"))[0];g.style.top="-12px";g.style.left=a.position(d).l-140+"px";g.style.zIndex=1e4;a.module.mask.showUnderNode(g);a.addEvent(window,"resize",i.setPos);a.addEvent(f.close,"click",i.close);a.addEvent(f.share,"click",i.share);a.addEvent(f.hotLink,"click",i.close)},hide:function(){a.removeNode(g);a.removeEvent(window,"resize",i.setPos);a.removeEvent(f.close,"click",i.close);a.removeEvent(f.send,"click",i.share);a.removeEvent(f.hotLink,"click",i.close);g=null;f=null;a.module.mask.back()}},k={},l={},m=function(){n();o();p();q();r();s();t()},n=function(){},o=function(){},p=function(){},q=function(){},r=function(){},s=function(){},t=function(){},u=function(){};d.destroy=u;if("oneop_guide"in $CONFIG&&$CONFIG.oneop_guide=="year_center_emcee"){m();var v="appstyle/topic/css/module/layer/layer_hotvav.css",w="js_appstyle_topic_css_module_layer_layer_hotvav";a.kit.io.cssLoader(v,w,function(){var b=setInterval(function(){if(a.E("weibo_top_public")&&a.sizzle("[node-type=hot]",a.E("weibo_top_public"))[0]){clearInterval(b);j.showLayer(c)}},100)},$CONFIG.cssVersion)}return d}});
STK.pageletM.register("pl.subject.topicLayer.hotLayer",function(a){var b=a.comp.subject.topicLayer.hotLayer();return b});
STK.pageletM.start();
